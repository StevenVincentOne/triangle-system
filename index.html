<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Intelligent System Model</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* ================
           Layout & Spacing
           ================ */
        .container {
            padding-left: 0.5rem !important;
            padding-right: 0.5rem !important;
            margin-left: 0 !important;
            margin-right: 0 !important;
            max-width: none !important;
            padding: 0.5rem !important;
        }

        .main-content {
            width: 100% !important;
            display: flex !important;
            justify-content: center !important;
            height: fit-content !important;
        }

        .d-flex {
            margin: 0 !important;
            padding: 0 !important;
        }

        .mb-3 {
            margin-bottom: 0.5rem !important;
        }

        /* ================
           Canvas Styling
           ================ */
        #canvas-container {
            width: 800px !important;
            height: 600px !important;
            overflow: hidden !important;
            margin: 0 auto !important;
            flex: 1;
            margin: 0 1rem;
        }

        #canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* ================
           Button Styling
           ================ */
        .btn-secondary {
            padding: 0.375rem 0.75rem;
            width: auto !important;
            min-width: fit-content;
            height: auto !important;
            white-space: nowrap;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 0.1rem !important;
            padding: 0.25rem !important;
        }

        .btn-secondary:active,
        .btn-secondary.active {
            width: auto !important;
            min-width: fit-content;
            height: auto !important;
        }

        .preset-button, .feature-button {
            width: 14ch;
            text-align: center;
        }

        /* ================
           Animation Panel
           ================ */
        .animation-input {
            background-color: #2c2c2c;
            color: #fff;
            border: 1px solid #555;
            padding: 5px 10px;
            border-radius: 4px;
            width: 100px;
        }

        .animation-input:focus {
            outline: none;
            border-color: #0dcaf0;
            box-shadow: 0 0 0 0.25rem rgba(13, 202, 240, 0.25);
        }

        #animate-button {
            margin-left: 0.5rem;
            padding: 2px 12px;
        }

        h3.title {
            margin: 0.25rem 0;  /* Reduce from default margins */
            padding: 0;
        }

        .features {
            margin-top: 0.25rem;  /* Reduce space between title and features */
        }

        /* If needed, adjust canvas top margin */
        #canvas-container {
            margin-top: 0.25rem;
        }

        .title {
            font-size: 1.5rem;  /* Make the title smaller */
            margin: 0 !important;
            padding: 0 !important;
            line-height: 1 !important;
        }

        

        .preset-button, .feature-button {
            width: 14ch;  /* Sets width to 14 characters */
            text-align: center;
        }

        /* For preset buttons */
        .btn-secondary {
            width: 14ch !important;
            text-align: center !important;
        }

        /* For feature buttons in the sidebar */
        #sidebar button {
            width: 14ch !important;
            text-align: center !important;
        }

        /* Minimize spacing between Features header and buttons */
        #sidebar h2 {
            margin: 0 !important;
            padding: 0 !important;
            line-height: 1 !important;
        }

        /* Reduce spacing between feature buttons */
        #sidebar button {
            margin: 0.1rem 0 !important;
            padding: 0.25rem !important;
        }

        /* Reduce sidebar padding */
        #sidebar {
            padding: 0.5rem !important;
        }

        /* Reduce spacing between preset buttons */
        .btn-secondary {
            margin: 0.1rem !important;
            padding: 0.25rem !important;
        }

        /* Reduce container padding */
        .container {
            padding: 0.5rem !important;
        }

        /* Tighten the d-flex spacing */
        .d-flex {
            margin: 0 !important;
            padding: 0 !important;
        }

        /* Reduce sidebar margin */
        #sidebar {
            margin-right: 0.5rem !important;  /* Reduce me-3 to smaller gap */
        }

        /* Reduce spacing between button groups */
        .mb-3 {
            margin-bottom: 0.5rem !important;
        }

        /* Reduce spacing for feature buttons */
        .btn {
            margin: 0.1rem !important;
        }

        /* Ensure h5 headers are tight */
        h5 {
            margin: 0 0 0.25rem 0 !important;
            padding: 0 !important;
        }

        /* Reduce spacing in main content area */
        .main-content > div {
            margin-bottom: 0.25rem !important;  /* Reduce space between all direct children */
            padding: 0.5rem !important;         /* Reduce padding */
        }

        /* Specifically target the controls */
        #manual-controls, #animation-controls {
            margin-top: 0.25rem !important;    /* Minimal top margin */
            padding: 0.5rem !important;        /* Reduced padding */
        }

        .visualization-container {
            margin-bottom: 1rem !important;
        }

        .controls-container {
            margin-bottom: 1rem !important;
        }

        .controls-container {
            background-color: #1a1a1a !important;
        }

        /* Adjust internal spacing */
        .controls-container > div {
            margin-bottom: 0.5rem !important;
        }

        .controls-container > div:last-child {
            margin-bottom: 0 !important;
        }

        #animation-controls {
            width: fit-content !important;
            min-width: min-content !important;
        }

        /* If needed, also add these to ensure consistent styling */
        #animation-controls .manual-controls-container {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .controls-group {
            display: flex;
            gap: 1rem;
            width: fit-content;
        }

        /* Remove bottom margins from children since they're side by side */
        .controls-group > div {
            margin-bottom: 0 !important;
        }

        .container {
            padding-left: 0.5rem !important;    /* Minimal left buffer */
            padding-right: 0.5rem !important;   /* Minimal right buffer */
            margin-left: 0 !important;          /* Remove default left margin */
            margin-right: 0 !important;         /* Remove default right margin */
            max-width: none !important;         /* Allow container to use full width */
        }

        /* Style for both control groups */
        #manual-controls, #animation-controls {
            background-color: #1a1e2c !important;  /* Dark blue background */
            border: 1px solid rgba(255, 255, 255, 0.1) !important;  /* Subtle border for bezel */
            border-radius: 6px !important;
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.2) !important;  /* Inner shadow for depth */
        }

        /* Fix background color for the lower container */
        .controls-container {
            background-color: #1a1e2c !important;  /* Match the dark blue */
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
        }

        /* Ensure consistent header styling */
        #manual-controls h3, #animation-controls h3 {
            color: #ffffff;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }

        

        /* Center all major containers */
        .container > div {
            margin-left: auto !important;
            margin-right: auto !important;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Center the visualization container and its contents */
        .visualization-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: fit-content;
        }

        /* Center the buttons container */
        #buttons-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        /* Center the button rows */
        #buttons-container > div {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }

        /* Center the controls group */
        .controls-group {
            margin: 0 auto;
        }

        .main-content {
            width: fit-content !important;
            height: fit-content !important;
        }

        #canvas-container {
            width: 800px !important;  /* Or your desired width */
            height: 600px !important; /* Or your desired height */
            overflow: hidden !important;
        }

        #canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .main-content {
            width: 100% !important;
            display: flex !important;
            justify-content: center !important;
        }

        #canvas-container {
            width: 800px !important;
            height: 600px !important;
            overflow: hidden !important;
            margin: 0 auto !important;  /* Centers horizontally if flex is not working */
        }

        #canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* If needed, also center the parent container */
        .visualization-container {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
        }

        .controls-stack {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;  /* Reduced from default */
            width: 100%;
        }

        #manual-controls, #animation-controls {
            width: 100%;
            margin: 0 !important;  /* Remove any default margins */
            padding: 0.5rem !important;  /* Reduced padding */
        }

        .manual-input-group {
            margin: 0 !important;
            padding: 0 !important;
        }

        .manual-input-group label {
            margin-right: 0.25rem !important;
        }

        .manual-input-group input {
            margin: 0 !important;
            padding: 0.25rem 0.5rem !important;
        }

        .btn {
            padding: 0.25rem 0.5rem !important;
        }

        /* Reduce input field padding */
        .manual-input input, .animation-input input {
            padding: 0.15rem 0.25rem !important;
        }

        /* Tighter spacing between elements */
        .manual-controls-container, .animation-controls-container {
            gap: 0.5rem !important;
        }

        /* Reduce space between label and input */
        .manual-input-group, .animation-input-group {
            gap: 0.25rem !important;
        }

        /* Compact labels */
        .manual-input-group label, .animation-input-group label {
            margin: 0 !important;
            padding-right: 0.15rem !important;
        }

        /* Adjust button padding */
        .btn {
            padding: 0.15rem 0.35rem !important;
        }

        /* Adjust dropdown button */
        .dropdown-toggle {
            padding: 0.15rem 0.35rem !important;
        }

        .manual-input, .animation-input {
            width: 8ch !important;     /* Increased to 8ch to ensure visibility of 6 chars plus decimal */
            min-width: 8ch !important; /* Match the width */
            padding: 0.15rem 0.25rem !important;
        }

        .manual-input-group input, .animation-input-group input {
            width: 8ch !important;
            min-width: 8ch !important;
        }

        /* Reduce text size for manual and animation controls */
        .manual-controls-container,
        .animation-controls-container,
        .manual-input-group,
        .animation-input-group,
        .manual-input-group label,
        .animation-input-group label,
        .manual-input,
        .animation-input,
        .manual-controls-container .btn,
        .animation-controls-container .btn {
            font-size: 0.8rem !important;  /* Reduced from 0.9rem to 0.8rem */
        }

        /* Adjust input height to match new font size */
        .manual-input,
        .animation-input {
            height: calc(1.4em + 0.4rem) !important;  /* Further reduced height */
        }

        /* Adjust button padding to match new size */
        .manual-controls-container .btn,
        .animation-controls-container .btn {
            padding: 0.1rem 0.25rem !important;  /* Further reduced padding */
        }

        

        /* Button sizing and consistency fixes */
        .btn-secondary {
            padding: 0.375rem 0.75rem;  /* Standard Bootstrap padding */
            width: auto !important;     /* Override any width settings */
            min-width: fit-content;     /* Adjust to content */
            height: auto !important;    /* Override any height settings */
            white-space: nowrap;        /* Prevent text wrapping */
            display: inline-flex;       /* Use flexbox for better content alignment */
            align-items: center;        /* Center content vertically */
            justify-content: center;    /* Center content horizontally */
        }

        /* Ensure buttons maintain size when active/selected */
        .btn-secondary:active,
        .btn-secondary.active {
            width: auto !important;
            min-width: fit-content;
            height: auto !important;
        }

        /* Feature buttons container specific styles */
        #buttons-container .d-flex {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        #buttons-container .btn {
            margin: 0;                  /* Remove any margin that might affect sizing */
            flex: 0 0 auto;            /* Prevent flex growth/shrink */
        }
        

        

        

       

        /* Add to your existing styles */
        .animation-panel-start,
        .animation-panel-end {
            width: 120px;
            padding: 0.5rem;
            background-color: #2c2c2c;
            border: 1px solid #444;
            border-radius: 4px
        }

        .animation-panel-start label,
        .animation-panel-end label {
            color: #ddd;
            font-size: 0.8rem;
            text-align: center;
            width: 100%;
            border-bottom: 1px solid #444;
            padding-bottom: 0.25rem;
        }

        .animation-panel-start .manual-input-group,
        .animation-panel-end .manual-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .animation-panel-start input,
        .animation-panel-end input {
            width: 100%;
            font-size: 0.8rem;
            padding: 0.15rem 0.25rem;
        }

        #canvas-container {
            flex: 1;
            margin: 0 1rem;
        }

        /* Add to your existing styles */
        .visualization-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        #manual-controls {
            width: 100%;
            padding: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .animation-panel-start,
        .animation-panel-end {
            min-width: 120px;
        }

        /* Add to your existing styles */
        .feature-buttons-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-buttons-container .btn {
            min-width: 90px;
            text-align: center;
        }

        /* Style for active feature buttons */
        .feature-buttons-container .btn.btn-info {
            background-color: #0dcaf0;
            border-color: #0dcaf0;
            color: #000;
        }

        /* Add to your existing styles */
        .preset-buttons-container {
            background-color: #1a1e2c;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .preset-buttons-container .btn {
            min-width: 90px;
            text-align: center;
        }

        /* Ensure consistent button styling */
        .btn-secondary {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* Add to your existing styles */
        #animation-controls {
            min-width: 300px;
        }

        #animation-controls input {
            width: 80px;
        }

        /* Add to your existing styles section */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group .form-check {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .checkbox-group .form-check-input {
            margin-top: 0;
        }

        .checkbox-group .form-check-label {
            margin-bottom: 0;
        }

        /* Export container button spacing */
        .export-container button {
            margin-right: 0.5rem !important;
        }
        
        .export-container button:last-child {
            margin-right: 0 !important;
        }

        /* Save State button styling */
        #saveState {
            background-color: #198754 !important;  /* Bootstrap success green */
            border-color: #198754 !important;
        }

        #saveState:hover {
            background-color: #157347 !important;
            border-color: #146c43 !important;
        }

        

                /* =================
           Subtriangle Panel
           ================= */
        /* ... other styles ... */

        .entropy-section {
            text-align: center;
        }

        .entropy-section .section-header {
            margin-bottom: 0.5rem;
        }

        /* Add specific styling for entropy section inputs */
        .entropy-section input {
            width: 10ch !important;  /* Increase from default to 10ch */
            min-width: 10ch !important;
            text-align: center;
        }

        /* Coordinate inputs in subtriangle */
        .subtriangle-main-row .coordinate-input {
            width: 12ch !important;
        }

        /* =================
           Euler Line Panel
           ================= */
        .coordinate-input {
            width: 12ch !important;  /* Wider for coordinate pairs */
        }

        .panel-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 0.5rem;
        }

        .panel-row:last-child {
            margin-bottom: 0;
        }

        /* Update input field sizes for System Entropy and Capacity panel */
        .system-entropy-panel input {
            width: 10ch !important;  /* Increase from 8ch to 9ch */
            min-width: 9ch !important;
            text-align: center;
            background-color: #2b4280;
            color: #fff;
        }

        .subtriangle-headers {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .subtriangle-main-row {
            display: grid;
            
        }

        /* Info Box Container */
        .info-box-container {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            font-size: 0.8rem !important;
        }

        /* Search Field Container */
        .info-search-container {
            position: relative;
            min-width: 10ch;
        }

        /* Search Input */
        .info-search-container input {
            width: 10ch;
            padding: 0.15rem 0.25rem !important;
            font-size: 0.8rem !important;
            height: calc(1.4em + 0.4rem) !important;
            text-align: center;
        }

        /* Display Field */
        .info-display input {
            padding: 0.15rem 0.25rem !important;
            background-color: #2b4280;
            border: 1px solid #444;
            font-size: 0.8rem !important;
            width: 16ch !important;
            min-width: 16ch !important;
            text-align: center;
            font-family: monospace;
        }

        /* Update Button */
        #info-display-update {
            padding: 0.15rem 0.35rem !important;
            font-size: 0.8rem !important;
            height: calc(1.4em + 0.4rem) !important;
        }

        .data-info-panel {
            background-color: #1a1a1a;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .data-info-panel .panel-header {
            color: #ffffff;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }

        .data-info-panel .panel-content {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .data-info-panel .value-section {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .data-info-panel .panel-row {
            display: flex;
            justify-content: space-between;
            gap: 0.5rem;
        }

        .data-info-panel .label-value-pair {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .data-info-panel .label-value-pair label {
            margin-bottom: 0.25rem;
        }

        .data-info-panel .label-value-pair input {
            width: 100%;
            text-align: center;
        }

    </style>

    
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="container">
        <h1 class="title text-center mb-2">Intelligent System Model</h1>

        <!-- Visualization container -->
        <div class="visualization-container">
            

            <!-- Manual Controls (at top) -->
            <div id="manual-controls">
                <div class="manual-controls-container">
                    <!-- NC Group -->
                    <div class="nc-group">
                        <label>Set Manual:</label>
                        <div class="manual-input-group">
                            <label for="manual-nc1">NC1</label>
                            <input id="manual-nc1" type="text" class="manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="manual-nc2">NC2</label>
                            <input id="manual-nc2" type="text" class="manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="manual-nc3">NC3</label>
                            <input id="manual-nc3" type="text" class="manual-input" maxlength="6">
                        </div>
                    </div>

                    <!-- Checkbox Group -->
                    <div class="control-group">
                        <div class="checkbox-group">
                            <div class="form-check">
                                <input type="checkbox" id="applyToStart" checked>
                                <label for="applyToStart">Start</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" id="applyToEnd">
                                <label for="applyToEnd">End</label>
                            </div>
                            <button id="apply-manual" class="btn btn-info">Apply NC</button>
                        </div>
                    </div>

                    <!-- IC Group -->
                    <div class="ic-group">
                        <div class="manual-input-group">
                            <label for="manual-ic1">IC1</label>
                            <input id="manual-ic1" type="text" class="manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="manual-ic2">IC2</label>
                            <input id="manual-ic2" type="text" class="manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="manual-ic3">IC3</label>
                            <input id="manual-ic3" type="text" class="manual-input" maxlength="6">
                        </div>
                        <button id="apply-manual-ic" class="btn btn-info">Apply IC</button>
                    </div>
                </div>
            </div>

            <!-- Preset buttons and dropdowns container -->
            <div class="preset-buttons-container">
                <!-- Standard preset buttons -->
                <button id="equilateral" class="btn btn-secondary btn-sm">Equilateral</button>
                <button id="isosceles" class="btn btn-secondary btn-sm">Isosceles</button>
                <button id="scalene" class="btn btn-secondary btn-sm">Scalene</button>
                <button id="right" class="btn btn-secondary btn-sm">Right</button>
                <button id="acute" class="btn btn-secondary btn-sm">Acute</button>
                <button id="obtuse" class="btn btn-secondary btn-sm">Obtuse</button>
                
                <!-- Add Save button -->
                <button id="save-preset" class="btn btn-success btn-sm">Save Preset</button>
                
                <!-- Moved dropdowns -->
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="userPresetsDropdown" data-bs-toggle="dropdown">
                        User Presets
                    </button>
                    <ul class="dropdown-menu" id="userPresetsList">
                        <!-- User presets will be added here dynamically -->
                    </ul>
                </div>
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="animationsDropdown" data-bs-toggle="dropdown">
                        Animations
                    </button>
                    <ul class="dropdown-menu" id="animationsList">
                        <!-- Animations will be added here dynamically -->
                    </ul>
                </div>
            </div>
            <!-- Info Box Container -->
            <div class="info-box-container">
                <!-- First Metric -->
                <div class="info-search-container">
                    <input type="text" id="info-search-1" class="form-control" placeholder="Search...">
                    <div id="search-results-1" class="search-results-dropdown"></div>
                </div>
                <div class="info-display">
                    <input id="info-display-value-1" type="text" readonly>
                </div>

                <!-- Second Metric -->
                <div class="info-search-container">
                    <input type="text" id="info-search-2" class="form-control" placeholder="Search...">
                    <div id="search-results-2" class="search-results-dropdown"></div>
                </div>
                <div class="info-display">
                    <input id="info-display-value-2" type="text" readonly>
                </div>

                <!-- Third Metric -->
                <div class="info-search-container">
                    <input type="text" id="info-search-3" class="form-control" placeholder="Search...">
                    <div id="search-results-3" class="search-results-dropdown"></div>
                </div>
                <div class="info-display">
                    <input id="info-display-value-3" type="text" readonly>
                </div>

                <!-- Single Update Button -->
                <button id="info-display-update" class="btn btn-info btn-sm">Update</button>
            </div>

            <!-- Canvas and Animation Controls -->
            <div class="d-flex align-items-start gap-2">
                <!-- Left Animation Panel (Start) with Export Buttons -->
                <div class="animation-panel-start bg-dark p-2 rounded">
                    <label class="mb-2">Animation Start</label>
                    <div class="d-flex flex-column gap-2">
                        <div class="manual-input-group">
                            <label for="animation-nc1-start">NC1</label>
                            <input id="animation-nc1-start" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc2-start">NC2</label>
                            <input id="animation-nc2-start" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc3-start">NC3</label>
                            <input id="animation-nc3-start" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        
                        <!-- Export buttons moved here and stacked vertically -->
                        <div class="export-container d-flex flex-column gap-2 mt-3">
                            <button id="saveState" class="btn btn-primary">Save State</button>
                            <button id="exportImage" class="btn btn-info">Export Image</button>
                            <button id="exportData" class="btn btn-info">Export Data</button>
                            <button id="importButton" class="btn btn-info">Import Data</button><!-- Hidden File Input -->
                            <input type="file" id="importFile" style="display: none;" accept=".csv">
                        </div>
                    </div>
                </div>

                <!-- Canvas (Center) -->
                <div id="canvas-container" class="bg-dark p-2 rounded">
                    <canvas id="canvas"></canvas>
                </div>

                <!-- Right Animation Panel (End) -->
                <div class="animation-panel-end bg-dark p-2 rounded">
                    <label class="mb-2">Animation End</label>
                    <div class="d-flex flex-column gap-2">
                        <div class="manual-input-group">
                            <label for="animation-nc1-end">NC1</label>
                            <input id="animation-nc1-end" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc2-end">NC2</label>
                            <input id="animation-nc2-end" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc3-end">NC3</label>
                            <input id="animation-nc3-end" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <!-- Add new animation buttons -->
                        <div class="d-flex flex-column gap-2 mt-2">
                            <button id="animate-button-end" class="btn btn-info btn-sm">Animate</button>
                            <input type="checkbox" id="animation-loop" name="animation-loop">
                                <label for="animation-loop">Loop</label>
                            <div class="checkbox-container">
                                <input type="checkbox" id="intelligenceToggle">
                                <label for="intelligenceToggle">Intelligence</label>
                            </div>
                            <button id="save-animation-end" class="btn btn-info btn-sm">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            
            

            <!-- Add this section after the canvas and animation controls -->
            <div class="d-flex justify-content-center gap-2 mt-3">
                <!-- Feature Toggle Buttons -->
                <div class="feature-buttons-container d-flex flex-column align-items-center gap-2">
                    <!-- Centers Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleCentroid" class="btn btn-secondary btn-sm">Centroid</button>
                        <button id="toggleIncenter" class="btn btn-secondary btn-sm">Incenter</button>
                        <button id="toggleCircumcenter" class="btn btn-secondary btn-sm">Circumcenter</button>
                        <button id="toggleNinePointCenter" class="btn btn-secondary btn-sm">Nine-Point Center</button>
                        <button id="toggleSubcenter" class="btn btn-secondary btn-sm">Subcenter</button>
                        <button id="toggleOrthocenter" class="btn btn-secondary btn-sm">Orthocenter</button>
                        <button id="toggleEuler" class="btn btn-secondary btn-sm">Euler</button>
                    </div>
                    
                    <!-- Circles Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleIncircle" class="btn btn-secondary btn-sm">Incircle</button>
                        <button id="toggleCircumcircle" class="btn btn-secondary btn-sm">Circumcircle</button>
                        <button id="toggleNinePointCircle" class="btn btn-secondary btn-sm">Nine-Point Circle</button>
                        <button id="toggleSubcircle" class="btn btn-secondary btn-sm">Subcircle</button>
                        <button id="toggleSubtriangle" class="btn btn-secondary btn-sm">Subtriangle</button>
                        <button id="toggleSubsystems" class="btn btn-secondary btn-sm">Subsystems</button>
                    </div>

                    <!-- Other Features Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleTangents" class="btn btn-secondary btn-sm">Tangents</button>
                        <button id="toggleMidpoints" class="btn btn-secondary btn-sm">Midpoints</button>
                        <button id="toggleIC" class="btn btn-secondary btn-sm">I-Channels</button>
                        <button id="toggleMedians" class="btn btn-secondary btn-sm">Medians</button>
                        <button id="toggleAltitudes" class="btn btn-secondary btn-sm">Altitudes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard container -->
        <div class="dashboard-container">
                <!-- System Panel -->
                <div class="dashboard-panel">
                    <h3 class="panel-header">System</h3>
                    <div class="panel-row">  <!-- Changed to panel-row for horizontal alignment -->
                        <!-- Nodes Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Nodes</h3>
                            <div class="panel-row">
                                <!-- Angles Column -->
                                <div class="value-column">
                                    <div class="label-value-pair">
                                        <label for="node-n1-angle">N1 ∠</label>
                                        <input id="node-n1-angle" type="text" class="form-control" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node-n2-angle">N2 ∠</label>
                                        <input id="node-n2-angle" type="text" class="form-control" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node-n3-angle">N3 ∠</label>
                                        <input id="node-n3-angle" type="text" class="form-control" readonly>
                                    </div>
                                </div>
                                
                                <!-- Coordinates Column -->
                                <div class="value-column">
                                    <div class="label-value-pair">
                                        <label for="node1-coords">N1 (xy)</label>
                                        <input id="node1-coords" type="text" class="form-control coordinate-input" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node2-coords">N2 (xy)</label>
                                        <input id="node2-coords" type="text" class="form-control coordinate-input" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node3-coords">N3 (xy)</label>
                                        <input id="node3-coords" type="text" class="form-control coordinate-input" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Node Channels Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Node Channels</h3>
                            <div class="panel-content">
                                <div class="label-value-pair">
                                    <label for="channel-1">NC1</label>
                                    <input id="channel-1" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="channel-2">NC2</label>
                                    <input id="channel-2" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="channel-3">NC3</label>
                                    <input id="channel-3" type="text" class="form-control" size="8" readonly>
                                </div>
                            </div>
                        </div>
                        <!-- I-Channels Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">I-Channels</h3>
                            <div class="panel-content">
                                <div class="label-value-pair">
                                    <label for="ic-1">IC1</label>
                                    <input id="ic-1" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="ic-2">IC2</label>
                                    <input id="ic-2" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="ic-3">IC3</label>
                                    <input id="ic-3" type="text" class="form-control" size="8" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- Medians Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Medians</h3>
                            <div class="panel-content">
                                <div class="panel-row">  <!-- Container for the two columns -->
                                    <!-- Midpoints Column -->
                                    <div class="value-column">
                                        <div class="label-value-pair">
                                            <label>M1 (xy)</label>
                                            <input id="mid1-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>M2 (xy)</label>
                                            <input id="mid2-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>M3 (xy)</label>
                                            <input id="mid3-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                    </div>

                                    <!-- Median Lengths Column -->
                                    <div class="value-column">
                                        <div class="label-value-pair">
                                            <label>ml1</label>
                                            <input id="median1-length" type="text" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>ml2</label>
                                            <input id="median2-length" type="text" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>ml3</label>
                                            <input id="median3-length" type="text" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Altitudes panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Altitudes</h3>
                            <div class="panel-content">
                                <div class="panel-row">  <!-- Container for the two columns -->
                                    <!-- Altitude Feet Positions Column -->
                                    <div class="value-column">
                                        <div class="label-value-pair">
                                            <label>Af1 (xy)</label>
                                            <input id="altitude1-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>Af2 (xy)</label>
                                            <input id="altitude2-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>Af3 (xy)</label>
                                            <input id="altitude3-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                    </div>

                                    <!-- Altitude Lengths Column -->
                                    <div class="value-column">
                                        <div class="label-value-pair">
                                            <label>Al1</label>
                                            <input id="altitude1-length" type="text" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>Al2</label>
                                            <input id="altitude2-length" type="text" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>Al3</label>
                                            <input id="altitude3-length" type="text" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- System Entropy and Capacity Panel -->
            <div class="dashboard-panel">
                <h3 class="panel-header">System Entropy and Capacity</h3>
                <div class="panel-content">
                    <!-- Main Values Section -->
                    <div class="value-section">
                        <div class="panel-row">
                            <div class="label-value-pair">
                                <label>H</label>
                                <input id="system-h" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>HP</label>
                                <input id="system-sph" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>HIC</label>
                                <input id="system-mch" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>C</label>
                                <input id="system-c" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="sh-b-ratio">H/C</label>
                                <input id="sh-b-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="b-sh-ratio">C/H</label>
                                <input id="b-sh-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="sph-area-ratio">HP/C</label>
                                <input id="sph-area-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="b-sph-ratio">C/HP</label>
                                <input id="b-sph-ratio" type="text" readonly>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Primary Ratios Section -->
                    <div class="value-section">
                        <div class="panel-row">
                            
                            <div class="label-value-pair">
                                <label for="mch-b-ratio">HIC/C</label>
                                <input id="mch-b-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="b-mch-ratio">C/HIC</label>
                                <input id="b-mch-ratio" type="text" readonly>
                            <div>
                        </div>
                    </div>

                    <!-- Secondary Ratios Section -->
                    <div class="value-section">
                        <div class="panel-row">
                            <div class="label-value-pair">
                                <label for="hp-hic-ratio">HP/HIC</label>
                                <input id="hp-hic-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="hic-hp-ratio">HIC/HP</label>
                                <input id="hic-hp-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="hp-h-ratio">HP/H</label>
                                <input id="hp-h-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="h-hp-ratio">H/HP</label>
                                <input id="h-hp-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="hic-h-ratio">HIC/H</label>
                                <input id="hic-h-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="h-hic-ratio">H/HIC</label>
                                <input id="h-hic-ratio" type="text" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        
        <!-- After the System Entropy and Capacity Panel -->
        <div class="dashboard-panel data-info-panel">
            <h3 class="panel-header">System Data and Information</h3>
            <div class="panel-content">
                <!-- Data Values Row -->
                <div class="panel-row" style="justify-content: center;">
                    <div class="label-value-pair">
                        <label>Data (D)</label>
                        <input id="system-d" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>Bits (B)</label>
                        <input id="system-b" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>Entropy (E)</label>
                        <input id="system-e" type="text" readonly>
                    </div>
                </div>
                
                <!-- Ratios Row -->
                <div class="panel-row" style="justify-content: center;">
                    <div class="label-value-pair">
                        <label>B/D</label>
                        <input id="system-bd-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>E/D</label>
                        <input id="system-ed-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>B/E</label>
                        <input id="system-be-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>(E+D)/B</label>
                        <input id="system-edb-ratio" type="text" readonly>
                    </div>
                </div>
                
                <!-- Controls Row -->
                <div class="panel-row" style="justify-content: center;">
                    <div class="label-value-pair">
                        <label>Loss Input (LI) %</label>
                        <input 
                            id="loss-input-factor" 
                            type="number" 
                            min="0" 
                            max="100" 
                            step="0.0001" 
                            class="form-control"
                        >
                    </div>
                    <div class="flow-control">
                        <label>Flow Rate (letters/sec)</label>
                        <div class="flow-rate-controls">
                            <input type="range" id="flowRateSlider" min="0" max="1000" value="100">
                            <input type="number" id="flowRateValue" min="0" max="1000" value="100">
                        </div>
                    </div>
                </div>
                
                <!-- Buttons Row -->
                <div class="panel-row" style="justify-content: center;">
                    <button id="letterFlowToggle" class="flow-control-btn btn btn-primary">Start Flow</button>
                    <button id="zeroDataButton" class="flow-control-btn btn btn-secondary">Zero Data</button>
                </div>
            </div>
        </div>

        <!-- Subsystems Panel -->
        <div class="dashboard-panel">
            <h3 class="panel-header">Subsystems</h3>
            <div class="panel-content subsystems-grid">
                <!-- SS1 Row -->
                <div class="subsystem-row">
                    <div class="label-value-pair">
                        <label>ss∠1</label>
                        <input id="subsystem-1-angle" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh1</label>
                        <input id="subsystem-1-perimeter" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc1</label>
                        <input id="subsystem-1-area" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/ssc1</label>
                        <input id="subsystem-1-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc/ssh1</label>
                        <input id="subsystem-1-inverse-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/H1</label>
                        <input id="subsystem-1-system-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>H/ssh1</label>
                        <input id="subsystem-1-entropy-ratio" type="text" readonly>
                    </div>
                </div>

                <!-- SS2 Row -->
                <div class="subsystem-row">
                    <div class="label-value-pair">
                        <label>ss∠2</label>
                        <input id="subsystem-2-angle" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh2</label>
                        <input id="subsystem-2-perimeter" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc2</label>
                        <input id="subsystem-2-area" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/ssc2</label>
                        <input id="subsystem-2-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc/ssh2</label>
                        <input id="subsystem-2-inverse-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/H2</label>
                        <input id="subsystem-2-system-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>H/ssh2</label>
                        <input id="subsystem-2-entropy-ratio" type="text" readonly>
                    </div>
                </div>

                <!-- SS3 Row -->
                <div class="subsystem-row">
                    <div class="label-value-pair">
                        <label>ss∠3</label>
                        <input id="subsystem-3-angle" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh3</label>
                        <input id="subsystem-3-perimeter" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc3</label>
                        <input id="subsystem-3-area" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/ssc3</label>
                        <input id="subsystem-3-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc/ssh3</label>
                        <input id="subsystem-3-inverse-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/H3</label>
                        <input id="subsystem-3-system-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>H/ssh3</label>
                        <input id="subsystem-3-entropy-ratio" type="text" readonly>
                    </div>
                </div>
            </div>
        </div>
        
        
        <!-- Subtriangle Panel -->
        <div class="dashboard-panel">
            <h3 class="panel-header">Subtriangle</h3>
            
            <div class="panel-content">
                <!-- Nodes and Channels Row -->
                <div class="subtriangle-section">
                    <h4 class="section-header">Nodes and Channels</h4>
                    <div class="nodes-channels-row">
                        <div class="label-value-pair">
                            <label>ssi1 (xy)</label>
                            <input id="subsystem-1-centroid" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>ssi2 (xy)</label>
                            <input id="subsystem-2-centroid" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>ssi3 (xy)</label>
                            <input id="subsystem-3-centroid" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>stc1</label>
                            <input id="subchannel-1" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>stc2</label>
                            <input id="subchannel-2" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>stc3</label>
                            <input id="subchannel-3" type="text" readonly>
                        </div>
                    </div>
                </div>

                <!-- Entropy and Capacity Row -->
                <div class="subtriangle-section">
                    <h4 class="section-header">Entropy and Capacity</h4>
                    <div class="entropy-capacity-row">
                        <div class="label-value-pair">
                            <label>hst</label>
                            <input id="subtriangle-hst" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>cst</label>
                            <input id="subtriangle-cst" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>hst/cst</label>
                            <input id="hst-cst-ratio" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>cst/hst</label>
                            <input id="cst-hst-ratio" type="text" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Euler Line panel -->
        <div class="dashboard-panel">
            <h3 class="panel-header">Euler Line</h3>
            
            <!-- Points and Length Row -->
            <div class="panel-content">
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>O (xy)</label>
                        <input id="circumcenter-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>I (xy)</label>
                        <input id="centroid-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>SP (xy)</label>
                        <input id="subcenter-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NP (xy)</label>
                        <input id="nine-point-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>HO (xy)</label>
                        <input id="orthocenter-coords" type="text" class="coordinate-input" readonly>
                    </div>
                </div>

                <!-- Slope, Angle and Ratios Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>EL</label>
                        <input id="euler-line-length" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>mEL</label>
                        <input id="euler-line-slope" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>θEL</label>
                        <input id="euler-line-angle" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>O-I/EL</label>
                        <input id="o-i-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>I-SP/EL</label>
                        <input id="i-sp-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>SP-NP/EL</label>
                        <input id="sp-np-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NP-HO/EL</label>
                        <input id="np-ho-ratio" type="text" readonly>
                    </div>
                </div>

                <!-- NC Intersection Angles Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>NC1 θa</label>
                        <input id="nc1-acute" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC1 θo</label>
                        <input id="nc1-obtuse" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC2 θa</label>
                        <input id="nc2-acute" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC2 θo</label>
                        <input id="nc2-obtuse" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC3 θa</label>
                        <input id="nc3-acute" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC3 θo</label>
                        <input id="nc3-obtuse" type="text" readonly>
                    </div>
                </div>
            </div>
        </div>

        <!-- Incircle Panel -->
        <div class="dashboard-panel">
            <h3 class="panel-header">Incircle</h3>
            <div class="panel-content">
                <!-- Coordinates and Measurements Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>IN (xy)</label>
                        <input id="incenter-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>T1 (xy)</label>
                        <input id="tan1-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>T2 (xy)</label>
                        <input id="tan2-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>T3 (xy)</label>
                        <input id="tan3-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(I,IN)</label>
                        <input id="d-i-in" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(IN,ssi1)</label>
                        <input id="d-in-ssi1" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(IN,ssi2)</label>
                        <input id="d-in-ssi2" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(IN,ssi3)</label>
                        <input id="d-in-ssi3" type="text" readonly>
                    </div>
                </div>

                <!-- Incircle Ratios Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>rIN</label>
                        <input id="inradius" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>CIN</label>
                        <input id="incircle-capacity" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>HIN</label>
                        <input id="incircle-entropy" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>CIN/HIN</label>
                        <input id="cin-hin-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>HIN/CIN</label>
                        <input id="hin-cin-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>CIN/C</label>
                        <input id="cin-c-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>HIN/H</label>
                        <input id="hin-h-ratio" type="text" readonly>
                    </div>
                </div>

                <!-- Distances and Ratios Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>d(M,T)1</label>
                        <input id="d-m-t-n1" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(M,T)2</label>
                        <input id="d-m-t-n2" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(M,T)3</label>
                        <input id="d-m-t-n3" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>r(M,T)1</label>
                        <input id="r-m-t-n1" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>r(M,T)2</label>
                        <input id="r-m-t-n2" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>r(M,T)3</label>
                        <input id="r-m-t-n3" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>rNC(M,T)1</label>
                        <input id="r-m-t-nc1" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>rNC(M,T)2</label>
                        <input id="r-m-t-nc2" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>rNC(M,T)3</label>
                        <input id="r-m-t-nc3" type="text" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Legend Panel -->
    <div class="dashboard-panel">
        <h3 class="panel-header">LEGEND</h3>
        <div class="panel-content">
            <div class="row">
                <div class="col-md-3">
                    <p>∠: Angle</p>
                </div>
                <div class="col-md-3">
                    <p>θ: Intersection Angle</p>
                </div>
                <div class="col-md-3">
                    <p>∞: Undefined, null</p>
                </div>
                <div class="col-md-3">
                    <p>(xy): position, coordinates</p>
                </div>
                <div class="col-md-3">
                    <p>Af (xy): Coordinates of the Foot of the Altitude</p>
                </div>
                <div class="col-md-3">
                    <p>Al: Length of the Altitude</p>
                </div>
                <div class="col-md-3">
                    <p>a: acute angle</p>
                </div>
                <div class="col-md-3">
                    <p>B: Bits (Resource)</p>
                </div>
                <div class="col-md-3">
                    <p>C: Capacity (Area), measured in B (Bits)</p>
                </div>
                <div class="col-md-3">
                    <p>CIN: Capacity of the Incircle</p>
                </div>
                <div class="col-md-3">
                    <p>cst: Capacity of the Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>d: distance between two points</p>
                </div>
                <div class="col-md-3">
                    <p>EL: Euler Line length</p>
                </div>
                <div class="col-md-3">
                    <p>H: Entropy (Length, Perimeter, Circumference), Total System Entropy (HP + HIC), measured in pixels</p>
                </div>
                <div class="col-md-3">
                    <p>h: Subsystem Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>HIC: Intelligence Channel Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>HIN: Entropy (circumference) of the Incircle</p>
                </div>
                <div class="col-md-3">
                    <p>HO: Orthocenter</p>
                </div>
                <div class="col-md-3">
                    <p>HP: System Perimeter Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>hst: Entropy of the Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>I: Centroid, Intelligence of the system</p>
                </div>
                <div class="col-md-3">
                    <p>IC: I-Channel or Intelligence Channel (distance from the centroid I to a Node N)</p>
                </div>
                <div class="col-md-3">
                    <p>IN: Incenter Point of the Incircle</p>
                </div>
                <div class="col-md-3"><div class="col-md-3">
                    <p>l: Length</p>
                </div>
                    <p>M: Midpoint (between two Nodes)</p>
                </div>
                <div class="col-md-3">
                    <p>m: slope</p>
                </div>
                <div class="col-md-3">
                    <p>ml: full Median length</p>
                </div>
                <div class="col-md-3">
                    <p>N: Node (vertex)</p>
                </div>
                <div class="col-md-3">
                    <p>NC: Node Channel (distance between two Nodes)</p>
                </div>
                <div class="col-md-3">
                    <p>NP: Nine-Point Center</p>
                </div>
                <div class="col-md-3">
                    <p>O: Circumcenter of the Circumcircle</p>
                </div>
                <div class="col-md-3">
                    <p>o: obtuse angle</p>
                </div>
                <div class="col-md-3">
                    <p>R: radius of a circle</p>
                </div>
                <div class="col-md-3">
                    <p>r: ratio</p>
                </div>
                <div class="col-md-3">
                    <p>r(M,T): ratio of d(M,T) to the perimeter HP</p>
                </div>
                <div class="col-md-3">
                    <p>rNC(M,T): ratio of d(M,T) to the NC length</p>
                </div>
                <div class="col-md-3">
                    <p>stc: Subchannel of the Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>SP: Subcenter Point of the Subcircle</p>
                </div>
                <div class="col-md-3">
                    <p>ss: Subsystem</p>
                </div>
                <div class="col-md-3">
                    <p>ssb: Subsystem Bits (Resource)</p>
                </div>
                <div class="col-md-3">
                    <p>ssc: Subsystem Capacity (Area)</p>
                </div>
                <div class="col-md-3">
                    <p>ssh: Subsystem Entropy (Perimeter)</p>
                </div>
                <div class="col-md-3">
                    <p>ssi: Subsystem Centroid, Subtriangle Node</p>
                </div>
                <div class="col-md-3">
                    <p>st: Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>T: Tangent point of Incircle</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="rules-module.js"></script>
<script src="environment-module.js"></script>
<script src="intelligence-module.js"></script>
<script src="controller.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const canvas = document.getElementById('canvas');
        if (canvas) {
            const systemController = new TriangleSystemController(canvas);
        } else {
            console.error("Canvas element not found");
        }
    });
</script>
</body>
</html>
