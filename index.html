<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Intelligent System Model</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    <style>
        /* Existing Styles */
        .dashboard {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            background-color: #2c2c2c;
            padding: 0.5rem;
            border-radius: 8px;
        }
        .dashboard-panel {
            flex: 0 1 auto;
            width: fit-content !important;
            min-width: min-content !important;
            background-color: #333;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 0.5rem !important;
            margin: 0 auto;
        }
        .panel-header {
            text-align: center;
            margin-bottom: 0.5rem;
            font-size: 1rem;
            color: #ddd;
            border-bottom: 1px solid #444;
            padding-bottom: 0.25rem;
        }
        .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem !important;
            width: 100% !important;
        }
        .label-value-pair label {
            flex: 0 0 auto;
            white-space: nowrap;
            min-width: 4ch !important;
        }
        input[type="text"].form-control {
            width: auto;
            min-width: 60px;
            box-sizing: border-box;
            padding: 2px 4px;
            font-size: 14px;
            text-align: center;
            margin: 0;
            background-color: #2c2c2c;
            color: #fff;
            border: 1px solid #555;
            border-radius: 3px;
        }
        .subsystems-table {
            width: 100%;
            table-layout: fixed;
        }
        .subsystems-table th,
        .subsystems-table td {
            text-align: center;
            padding: 0.25rem;
            border: 1px solid #444;
        }
        .subsystems-table th {
            font-weight: normal;
            background-color: #2c2c2c;
            color: #ddd;
        }
        .subsystems-table input[type="text"].form-control {
            width: 100%;
            min-width: 0;
        }
        .separator {
            height: 1px;
            background-color: #444;
            margin: 1rem 0;
        }
        .info-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .info-column {
            flex: 1;
            min-width: 200px;
        }

        .label-value-pair {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .label-value-pair label {
            flex: 1;
            margin-right: 0.5rem;
            white-space: nowrap;
        }

        .label-value-pair input {
            flex: 0 0 100px;
            width: 100px;
        }

        /* New Sidebar Styles */
        #sidebar {
            min-width: 200px;
            max-width: 300px;
            height: fit-content;
            background-color: #2c2c2c;
            padding: 0.5rem;
            border-radius: 8px;
        }
        
        #sidebar h5 {
            color: #ddd;
            margin-bottom: 0.5rem;
        }
        
        #sidebar button {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            margin: 0.1rem;  /* Reduce from 0.25rem to 0.1rem */
            width: 100%;
        }

        /* And/or adjust the flex column gap */
        #sidebar .d-flex.flex-column {
            gap: 0.1rem;  /* Add this if not already present, or reduce if it exists */
        }

        /* Layout Styles */
        .d-flex {
            display: flex;
            gap: 1rem;
        }

        .main-content {
            flex: 1;
        }

        /* Additional Adjustments */
        .controls {
            display: none; /* Hide the original controls */
        }

        /* Legends Panel Adjustments */
        .legends-panel {
            background-color: #2c2c2c;
            padding: 1rem;
            border-radius: 8px;
            color: #ddd;
        }
        .legends-panel p {
            margin: 0.5rem 0;
        }

        /* Add to your existing styles */
        .manual-input-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .manual-input-group label {
            color: #bbb;
            white-space: nowrap;
        }

        .manual-input-group input {
            width: 60px;
            background-color: #2c2c2c;
            color: #fff;
            border: 1px solid #555;
            text-align: right;
            padding-right: 4px;
        }

        /* Update the manual controls styles */
        #manual-controls {
            width: fit-content;
            min-width: min-content;
            background-color: #333;
            border: 1px solid #444;
        }

        .manual-controls-container {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .manual-input-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .manual-input-group label {
            color: #bbb;
            white-space: nowrap;
            min-width: 35px;
        }

        .manual-input-group input.manual-input {
            width: 80px;  /* Width for 8 characters */
            text-align: center;
            background-color: #2c2c2c;
            color: #fff;
            border: 1px solid #555;
            padding: 2px 4px;
            font-family: monospace;  /* For better alignment of numbers */
        }

       a #apply-manual {
            margin-left: 0.5rem;
            padding: 2px 12px;
        }

        .animation-input {
            background-color: #2c2c2c;
            color: #fff;
            border: 1px solid #555;
            padding: 5px 10px;
            border-radius: 4px;
            width: 100px;
        }

        .animation-input:focus {
            outline: none;
            border-color: #0dcaf0;
            box-shadow: 0 0 0 0.25rem rgba(13, 202, 240, 0.25);
        }

        #animate-button {
            margin-left: 0.5rem;
            padding: 2px 12px;
        }

        h3.title {
            margin: 0.25rem 0;  /* Reduce from default margins */
            padding: 0;
        }

        .features {
            margin-top: 0.25rem;  /* Reduce space between title and features */
        }

        /* If needed, adjust canvas top margin */
        #canvas-container {
            margin-top: 0.25rem;
        }

        .title {
            font-size: 1.5rem;  /* Make the title smaller */
            margin: 0 !important;
            padding: 0 !important;
            line-height: 1 !important;
        }

        /* Reduce spacing between all dashboard sections */
        .mb-4 {
            margin-bottom: 0.5rem !important;  /* Reduce from default 1.5rem */
        }

        /* Or if you prefer to target sections directly */
        #manual-controls, #animation-controls, #preset-controls {
            margin-bottom: 0.5rem !important;
        }

        .preset-button, .feature-button {
            width: 14ch;  /* Sets width to 14 characters */
            text-align: center;
        }

        /* For preset buttons */
        .btn-secondary {
            width: 14ch !important;
            text-align: center !important;
        }

        /* For feature buttons in the sidebar */
        #sidebar button {
            width: 14ch !important;
            text-align: center !important;
        }

        /* Minimize spacing between Features header and buttons */
        #sidebar h2 {
            margin: 0 !important;
            padding: 0 !important;
            line-height: 1 !important;
        }

        /* Reduce spacing between feature buttons */
        #sidebar button {
            margin: 0.1rem 0 !important;
            padding: 0.25rem !important;
        }

        /* Reduce sidebar padding */
        #sidebar {
            padding: 0.5rem !important;
        }

        /* Reduce spacing between preset buttons */
        .btn-secondary {
            margin: 0.1rem !important;
            padding: 0.25rem !important;
        }

        /* Reduce container padding */
        .container {
            padding: 0.5rem !important;
        }

        /* Tighten the d-flex spacing */
        .d-flex {
            margin: 0 !important;
            padding: 0 !important;
        }

        /* Reduce sidebar margin */
        #sidebar {
            margin-right: 0.5rem !important;  /* Reduce me-3 to smaller gap */
        }

        /* Reduce spacing between button groups */
        .mb-3 {
            margin-bottom: 0.5rem !important;
        }

        /* Reduce spacing for feature buttons */
        .btn {
            margin: 0.1rem !important;
        }

        /* Ensure h5 headers are tight */
        h5 {
            margin: 0 0 0.25rem 0 !important;
            padding: 0 !important;
        }

        /* Reduce spacing in main content area */
        .main-content > div {
            margin-bottom: 0.25rem !important;  /* Reduce space between all direct children */
            padding: 0.5rem !important;         /* Reduce padding */
        }

        /* Specifically target the controls */
        #manual-controls, #animation-controls {
            margin-top: 0.25rem !important;    /* Minimal top margin */
            padding: 0.5rem !important;        /* Reduced padding */
        }

        .visualization-container {
            margin-bottom: 1rem !important;
        }

        .controls-container {
            margin-bottom: 1rem !important;
        }

        .controls-container {
            background-color: #1a1a1a !important;
        }

        /* Adjust internal spacing */
        .controls-container > div {
            margin-bottom: 0.5rem !important;
        }

        .controls-container > div:last-child {
            margin-bottom: 0 !important;
        }

        #animation-controls {
            width: fit-content !important;
            min-width: min-content !important;
        }

        /* If needed, also add these to ensure consistent styling */
        #animation-controls .manual-controls-container {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .controls-group {
            display: flex;
            gap: 1rem;
            width: fit-content;
        }

        /* Remove bottom margins from children since they're side by side */
        .controls-group > div {
            margin-bottom: 0 !important;
        }

        .container {
            padding-left: 0.5rem !important;    /* Minimal left buffer */
            padding-right: 0.5rem !important;   /* Minimal right buffer */
            margin-left: 0 !important;          /* Remove default left margin */
            margin-right: 0 !important;         /* Remove default right margin */
            max-width: none !important;         /* Allow container to use full width */
        }

        /* Style for both control groups */
        #manual-controls, #animation-controls {
            background-color: #1a1e2c !important;  /* Dark blue background */
            border: 1px solid rgba(255, 255, 255, 0.1) !important;  /* Subtle border for bezel */
            border-radius: 6px !important;
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.2) !important;  /* Inner shadow for depth */
        }

        /* Fix background color for the lower container */
        .controls-container {
            background-color: #1a1e2c !important;  /* Match the dark blue */
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
        }

        /* Ensure consistent header styling */
        #manual-controls h3, #animation-controls h3 {
            color: #ffffff;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }

        .info-container {
            width: fit-content !important;
            margin: 0 auto !important;  /* Centers the container */
        }

        .info-content {
            display: flex;
            gap: 2rem;
        }

        .info-column {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .label-value-pair label {
            min-width: 8ch;
        }

        /* Center all major containers */
        .container > div {
            margin-left: auto !important;
            margin-right: auto !important;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Center the visualization container and its contents */
        .visualization-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: fit-content;
        }

        /* Center the buttons container */
        #buttons-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        /* Center the button rows */
        #buttons-container > div {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }

        /* Center the controls group */
        .controls-group {
            margin: 0 auto;
        }

        /* Center the dashboard panels */
        .dashboard, .info-container, .legends-panel {
            margin: 0 auto !important;
            width: fit-content;
        }

        /* Center content within panels */
        .panel-header {
            text-align: center;
        }

        .label-value-pair label {
            min-width: 4ch !important;  /* Minimum width for labels */
            margin-right: 0 !important; /* Remove any extra margin */
        }

        .label-value-pair input {
            width: 8ch !important;     /* Fixed width for inputs */
        }

        /* Make all dashboard panels conform to content */
        .dashboard-panel {
            width: fit-content !important;
            padding: 0.5rem !important;
        }

        /* Consistent spacing for all label-value pairs */
        .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem !important;
            margin-bottom: 0.25rem !important;
        }

        /* Specific adjustments for Channels, Medians, Nodes, Centers panels */
        .dashboard-panel .label-value-pair label {
            min-width: 4ch !important;
            text-align: right !important;
        }

        .dashboard-panel .label-value-pair input {
            width: 8ch !important;
        }

        /* Panel headers */
        .panel-header {
            text-align: center;
            margin-bottom: 0.5rem !important;
            padding-bottom: 0.25rem !important;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Dashboard row layout */
        .dashboard {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .main-content {
            width: fit-content !important;
            height: fit-content !important;
        }

        #canvas-container {
            width: 800px !important;  /* Or your desired width */
            height: 600px !important; /* Or your desired height */
            overflow: hidden !important;
        }

        #canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .main-content {
            width: 100% !important;
            display: flex !important;
            justify-content: center !important;
        }

        #canvas-container {
            width: 800px !important;
            height: 600px !important;
            overflow: hidden !important;
            margin: 0 auto !important;  /* Centers horizontally if flex is not working */
        }

        #canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* If needed, also center the parent container */
        .visualization-container {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
        }

        .controls-stack {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;  /* Reduced from default */
            width: 100%;
        }

        #manual-controls, #animation-controls {
            width: 100%;
            margin: 0 !important;  /* Remove any default margins */
            padding: 0.5rem !important;  /* Reduced padding */
        }

        .manual-input-group {
            margin: 0 !important;
            padding: 0 !important;
        }

        .manual-input-group label {
            margin-right: 0.25rem !important;
        }

        .manual-input-group input {
            margin: 0 !important;
            padding: 0.25rem 0.5rem !important;
        }

        .btn {
            padding: 0.25rem 0.5rem !important;
        }

        /* Reduce input field padding */
        .manual-input input, .animation-input input {
            padding: 0.15rem 0.25rem !important;
        }

        /* Tighter spacing between elements */
        .manual-controls-container, .animation-controls-container {
            gap: 0.5rem !important;
        }

        /* Reduce space between label and input */
        .manual-input-group, .animation-input-group {
            gap: 0.25rem !important;
        }

        /* Compact labels */
        .manual-input-group label, .animation-input-group label {
            margin: 0 !important;
            padding-right: 0.15rem !important;
        }

        /* Adjust button padding */
        .btn {
            padding: 0.15rem 0.35rem !important;
        }

        /* Adjust dropdown button */
        .dropdown-toggle {
            padding: 0.15rem 0.35rem !important;
        }

        .manual-input, .animation-input {
            width: 8ch !important;     /* Increased to 8ch to ensure visibility of 6 chars plus decimal */
            min-width: 8ch !important; /* Match the width */
            padding: 0.15rem 0.25rem !important;
        }

        .manual-input-group input, .animation-input-group input {
            width: 8ch !important;
            min-width: 8ch !important;
        }

        /* Reduce text size for manual and animation controls */
        .manual-controls-container,
        .animation-controls-container,
        .manual-input-group,
        .animation-input-group,
        .manual-input-group label,
        .animation-input-group label,
        .manual-input,
        .animation-input,
        .manual-controls-container .btn,
        .animation-controls-container .btn {
            font-size: 0.8rem !important;  /* Reduced from 0.9rem to 0.8rem */
        }

        /* Adjust input height to match new font size */
        .manual-input,
        .animation-input {
            height: calc(1.4em + 0.4rem) !important;  /* Further reduced height */
        }

        /* Adjust button padding to match new size */
        .manual-controls-container .btn,
        .animation-controls-container .btn {
            padding: 0.1rem 0.25rem !important;  /* Further reduced padding */
        }

        .dashboard-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .dashboard {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: flex-start;
        }

        /* Update dashboard panel styles */
        .dashboard-panel {
            flex: 0 1 auto;
            width: fit-content !important;
            min-width: min-content !important;
            background-color: #333;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 0.5rem !important;
        }

        /* Ensure label-value pairs are properly contained */
        .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem !important;
            width: 100% !important;
        }

        /* Make input fields consistent */
        .label-value-pair input {
            width: 8ch !important;     /* Fixed width for all inputs */
            min-width: 8ch !important;
            text-align: right !important;
            padding: 0.15rem 0.25rem !important;
        }

        /* Ensure labels don't shrink */
        .label-value-pair label {
            flex: 0 0 auto;
            white-space: nowrap;
            min-width: 4ch !important;
        }

        /* Special handling for Subsystems panel */
        .subsystems-table {
            width: 100%;
            table-layout: fixed;
        }

        .subsystems-table input {
            width: 100% !important;
            min-width: 8ch !important;
        }

        /* Main container */
        .dashboard-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: fit-content;
            margin: 0 auto;
        }

        /* Row container */
        .dashboard-row {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
        }

        /* Panel group (for Channels, Medians, Nodes) */
        .dashboard-group {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        /* Individual panels */
        .dashboard-panel {
            background-color: #333;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 0.5rem;
            width: fit-content;
        }

        /* Panel content container */
        .panel-content {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            width: fit-content;
        }

        /* Subsystems specific styling */
        .subsystems-panel {
            flex: 0 0 auto;
        }

        .subsystems-table {
            width: 100%;
            border-collapse: collapse;
        }

        /* Label-value pairs */
        .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            width: fit-content;
        }

        .label-value-pair label {
            flex: 0 0 auto;
            min-width: 4ch;
            text-align: right;
        }

        .label-value-pair input {
            width: 8ch;
            text-align: right;
            padding: 0.15rem 0.25rem;
        }

        /* Ensure label-value pairs are properly contained */
        .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem !important;
            width: 100% !important;
        }

        .label-value-pair label {
            min-width: 4ch !important;
            text-align: right !important;
        }

        .label-value-pair input {
            width: 8ch !important;     /* Fixed width for inputs */
            min-width: 8ch !important;
            text-align: right !important;
        }

        /* Subsystems panel specific fixes */
        .subsystems-panel {
            width: fit-content !important;
            flex: 0 0 auto !important;
        }

        .subsystems-table {
            width: auto !important;
            table-layout: fixed !important;
        }

        .subsystems-table td {
            padding: 0.25rem 0.5rem !important;
        }

        .subsystems-table input {
            width: 8ch !important;
            min-width: 8ch !important;
        }

        /* Base panel styles */
        .dashboard-panel {
            display: flex !important;
            flex-direction: column !important;
            width: fit-content !important;
            min-width: min-content !important;
            padding: 0.5rem !important;
            background-color: #333;
            border: 1px solid #444;
            border-radius: 4px;
        }

        /* Panel content wrapper */
        .panel-content {
            display: flex !important;
            flex-direction: column !important;
            width: fit-content !important;
            min-width: min-content !important;
        }

        /* Label-value pair container */
        .label-value-pair {
            display: flex !important;
            align-items: center !important;
            justify-content: flex-end !important;
            width: fit-content !important;
            min-width: min-content !important;
            gap: 0.5rem !important;
        }

        /* Labels */
        .label-value-pair label {
            flex: 0 0 auto !important;
            white-space: nowrap !important;
            min-width: 4ch !important;
            text-align: right !important;
        }

        /* Input fields */
        .label-value-pair input {
            width: 8ch !important;
            min-width: 8ch !important;
            max-width: 8ch !important;
            text-align: right !important;
            padding: 0.15rem 0.25rem !important;
        }

        /* Subsystems specific */
        .subsystems-table {
            width: auto !important;
            table-layout: fixed !important;
        }

        .subsystems-table td {
            padding: 0.25rem 0.5rem !important;
        }

        .subsystems-table input {
            width: 8ch !important;
            min-width: 8ch !important;
            max-width: 8ch !important;
        }

        /* Position panel specific styles */
        .dashboard-row:last-child {
            justify-content: center !important;  /* Center the Position panel row */
            width: 100% !important;  /* Full width container to allow centering */
        }

        .position-panel .panel-content {
            flex-direction: row !important;
            gap: 2rem !important;  /* Adjust this value if needed for better spacing */
        }

        /* Position panel specific styles */
        .position-panel .panel-content {
            flex-direction: column !important;
            gap: 0.5rem !important;
        }

        .position-row {
            display: flex !important;
            flex-direction: row !important;
            gap: 2rem !important;
            justify-content: flex-start !important;
        }

        /* Centers row specific alignment */
        .position-row:last-child {
            justify-content: flex-start !important;
        }

        /* Only center the text inside input fields */
        .position-panel input[type="text"].form-control {
            text-align: center; /* Center the text inside inputs */
        }

        /* Keep existing layout but ensure consistent spacing */
        .position-panel .position-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }

        .position-panel .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Center content in Position panel */
        .position-panel .panel-content {
            display: flex;
            flex-direction: column;
            align-items: center; /* Center all content horizontally */
        }

        .position-panel .position-row {
            display: flex;
            justify-content: center; /* Center the rows */
            flex-wrap: wrap;
            gap: 1rem;
            width: 100%;
            margin-bottom: 0.5rem;
        }

        .position-panel .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-width: 150px; /* Ensure consistent width for each pair */
        }

        .position-panel input[type="text"].form-control {
            text-align: center;
            width: 80px; /* Fixed width for inputs */
        }

        .position-panel label {
            min-width: 60px; /* Fixed width for labels */
        }

        /* Position panel grid layout */
        .position-panel .panel-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 columns of equal width */
            gap: 1rem;
            justify-items: center; /* Center items horizontally */
            align-items: center; /* Center items vertically */
            padding: 1rem;
        }

        /* For the last row with 5 items (I, IC, O, H, N) */
        .position-panel .position-row:last-child {
            grid-column: 1 / -1; /* Span all columns */
            display: flex;
            justify-content: center;
            gap: 1rem;
            width: 100%;
        }

        .position-panel .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
        }

        .position-panel input[type="text"].form-control {
            text-align: center;
            width: 80px;
        }

        /* Position Panel Specific Styles */
        .position-panel {
            width: 100%; /* Take full width of container */
        }

        .position-panel .panel-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
        }

        .position-panel .position-row {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem; /* Increased gap between pairs */
            width: 100%;
        }

        .position-panel .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-width: 140px; /* Consistent width for each pair */
            justify-content: center;
        }

        .position-panel label {
            flex: 0 0 70px; /* Fixed width for labels */
            text-align: right; /* Right align labels */
        }

        .position-panel input[type="text"].form-control {
            flex: 0 0 80px; /* Fixed width for inputs */
            text-align: center;
        }

        /* Button sizing and consistency fixes */
        .btn-secondary {
            padding: 0.375rem 0.75rem;  /* Standard Bootstrap padding */
            width: auto !important;     /* Override any width settings */
            min-width: fit-content;     /* Adjust to content */
            height: auto !important;    /* Override any height settings */
            white-space: nowrap;        /* Prevent text wrapping */
            display: inline-flex;       /* Use flexbox for better content alignment */
            align-items: center;        /* Center content vertically */
            justify-content: center;    /* Center content horizontally */
        }

        /* Ensure buttons maintain size when active/selected */
        .btn-secondary:active,
        .btn-secondary.active {
            width: auto !important;
            min-width: fit-content;
            height: auto !important;
        }

        /* Feature buttons container specific styles */
        #buttons-container .d-flex {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        #buttons-container .btn {
            margin: 0;                  /* Remove any margin that might affect sizing */
            flex: 0 0 auto;            /* Prevent flex growth/shrink */
        }

        .subsystems-table td:last-child {
            min-width: 140px;  /* Increased minimum width */
            width: auto;       /* Allow width to grow */
        }

        .subsystems-table input[type="text"].form-control {
            width: 100%;
            min-width: 100%;  /* Force input to take full cell width */
            box-sizing: border-box;
        }

        /* Specific style for centroid inputs */
        .subsystems-table input[id$="-centroid"] {
            min-width: 120px;
            width: auto;
            font-family: monospace;  /* Use monospace for better coordinate alignment */
        }

        /* Update styles for all input fields in the Subsystems table */
        .subsystems-table input[type="text"].form-control {
            width: 100%;
            min-width: 100%;
            padding: 2px 4px;
            box-sizing: border-box;
        }

        /* Specific style for centroid coordinate inputs */
        .subsystems-table input[id$="-centroid"] {
            width: 140px !important;  /* Force wider width */
            min-width: 140px !important;
            font-family: monospace;
        }

        /* Ensure table cells expand to fit inputs */
        .subsystems-table td {
            width: auto;
            white-space: nowrap;
        }

        /* Make the last column (coordinates) wider */
        .subsystems-table th:last-child,
        .subsystems-table td:last-child {
            width: 140px;
            min-width: 140px;
        }

        /* Update the I and O column input styles */
        .subsystems-table input[type="text"] {
            width: 100%;
            text-align: right;  /* Right-align all numbers */
            padding: 2px 4px;
            background-color: #333;
            color: #fff;
            border: 1px solid #444;
        }

        /* Specific width for coordinate columns */
        .subsystems-table td:nth-child(5) input,  /* I column */
        .subsystems-table td:nth-child(6) input { /* O column */
            min-width: 120px;  /* Ensure enough space for coordinates */
        }

        /* Make area column inputs wider */
        .subsystems-table td:nth-child(4) input { /* A column */
            min-width: 100px;  /* Adjust this value as needed */
        }

        /* Keep coordinate columns at their current width */
        .subsystems-table td:nth-child(5) input,  /* I column */
        .subsystems-table td:nth-child(6) input { /* O column */
            min-width: 120px;
        }

        .column-header {
            color: #fff;
            font-weight: bold;
            text-align: center;
            padding-bottom: 0.5rem;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #444;
        }

        .compact-panel .label-value-pair {
            padding-left: 0 !important;
            margin-left: 0 !important;
        }

        .compact-panel .label-value-pair label {
            padding-right: 4px !important;
        }

        .dashboard-panel .panel-content.compact-panel .label-value-pair input {
            width: 10ch !important;      /* Reduced from 12ch to 10ch */
            min-width: 10ch !important;  /* Match the width */
            text-align: right !important;
            padding-right: 4px !important;
        }

        /* Override any conflicting styles */
        .compact-panel input[type="text"].form-control {
            width: 10ch !important;
            min-width: 10ch !important;
            box-sizing: border-box !important;
        }

        /* Update Centers panel input styling */
        .position-panel input[type="text"].form-control {
            width: 12ch !important;          /* Increase from 8ch to 12ch */
            min-width: 12ch !important;      /* Match the width */
            text-align: center !important;   /* Keep center alignment */
            padding: 2px 4px !important;     /* Add some padding */
            font-family: monospace !important; /* Use monospace for better alignment */
            box-sizing: border-box !important;
        }

        /* Adjust the label-value pair container to accommodate wider inputs */
        .position-panel .label-value-pair {
            min-width: auto !important;      /* Remove fixed min-width */
            gap: 0.5rem !important;          /* Consistent spacing */
            margin-right: 1rem !important;   /* Space between pairs */
        }

        /* Ensure labels don't compress */
        .position-panel .label-value-pair label {
            white-space: nowrap !important;
            flex: 0 0 auto !important;
        }

        /* Adjust row spacing */
        .position-row {
            margin-bottom: 0.75rem !important;
            justify-content: flex-start !important;
            flex-wrap: wrap !important;
            gap: 1rem !important;
        }

        .subsystems-table td:last-child {
            min-width: 90px;  /* Match other columns */
            width: auto;
        }

        .subsystems-table input[type="text"].form-control {
            width: 100%;
            min-width: 100%;
            box-sizing: border-box;
            text-align: right;  /* Right-align all numbers */
        }

        /* Add to your existing styles */
        .animation-panel-start,
        .animation-panel-end {
            width: 120px;
            padding: 0.5rem;
            background-color: #2c2c2c;
            border: 1px solid #444;
            border-radius: 4px
        }

        .animation-panel-start label,
        .animation-panel-end label {
            color: #ddd;
            font-size: 0.8rem;
            text-align: center;
            width: 100%;
            border-bottom: 1px solid #444;
            padding-bottom: 0.25rem;
        }

        .animation-panel-start .manual-input-group,
        .animation-panel-end .manual-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .animation-panel-start input,
        .animation-panel-end input {
            width: 100%;
            font-size: 0.8rem;
            padding: 0.15rem 0.25rem;
        }

        #canvas-container {
            flex: 1;
            margin: 0 1rem;
        }

        /* Add to your existing styles */
        .visualization-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        #manual-controls {
            width: 100%;
            padding: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .animation-panel-start,
        .animation-panel-end {
            min-width: 120px;
        }

        /* Add to your existing styles */
        .feature-buttons-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-buttons-container .btn {
            min-width: 90px;
            text-align: center;
        }

        /* Style for active feature buttons */
        .feature-buttons-container .btn.btn-info {
            background-color: #0dcaf0;
            border-color: #0dcaf0;
            color: #000;
        }

        /* Add to your existing styles */
        .preset-buttons-container {
            background-color: #1a1e2c;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .preset-buttons-container .btn {
            min-width: 90px;
            text-align: center;
        }

        /* Ensure consistent button styling */
        .btn-secondary {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* Add to your existing styles */
        #animation-controls {
            min-width: 300px;
        }

        #animation-controls input {
            width: 80px;
        }

        /* Add to your existing styles section */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group .form-check {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .checkbox-group .form-check-input {
            margin-top: 0;
        }

        .checkbox-group .form-check-label {
            margin-bottom: 0;
        }

        /* Export container button spacing */
        .export-container button {
            margin-right: 0.5rem !important;
        }
        
        .export-container button:last-child {
            margin-right: 0 !important;
        }

        /* Save State button styling */
        #saveState {
            background-color: #198754 !important;  /* Bootstrap success green */
            border-color: #198754 !important;
        }

        #saveState:hover {
            background-color: #157347 !important;
            border-color: #146c43 !important;
        }

        /* Information Panel Styles */
        .information-panel .panel-content {
            gap: 1rem;
        }

        .info-column {
            flex: 1;
            min-width: 0;
        }

        .column-header {
            font-size: 0.9rem;
            color: #ddd;
            text-align: center;
            margin-bottom: 0.5rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid #444;
        }

        /* Information Panel Styles */
        .information-panel .row {
            margin: 0;
            width: 100%;
        }

        .info-column {
            padding: 0.5rem;
            background-color: #333;
            border-radius: 4px;
        }

        .column-header {
            font-size: 0.9rem;
            color: #ddd;
            text-align: center;
            margin-bottom: 0.5rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid #444;
        }

        .information-panel .label-value-pair {
            display: flex;
            align-items: center;
        }

        /* System Entropy and Capacity panel */
        .dashboard-row mt-0 {
            margin-top: 0 !important;
        }

        .dashboard-panel mt-0 {
            margin-top: 0 !important;
        }

        .dashboard-panel.mt-0 {
            border-top: none !important;
            border-radius: 0 !important;
        }

        /* Update subsystems panel styling */
        .subsystems-panel {
            width: fit-content !important;
            margin: 0 auto !important;
        }

        .subsystems-table {
            width: auto !important;
            table-layout: fixed !important;
            border-collapse: collapse !important;
        }

        .subsystems-table th,
        .subsystems-table td {
            padding: 0.25rem 0.5rem !important;
            text-align: center !important;
        }

        .subsystems-table input {
            width: 8ch !important;
            min-width: 8ch !important;
            text-align: right !important;
            padding: 0.15rem 0.25rem !important;
        }

        /* Ensure consistent panel spacing */
        .dashboard-row {
            display: flex !important;
            justify-content: center !important;
            width: 100% !important;
            margin-top: 0.5rem !important;
        }

        .dashboard-row:first-child {
            margin-top: 0 !important;
        }

        /* Update subtriangle panel styling */
        .subtriangle-panel {
            width: fit-content !important;
            margin: 0 auto !important;
        }

        /* Ensure consistent input styling */
        .form-control {
            font-family: monospace !important;
            background-color: #2c2c2c !important;
            border: 1px solid #444 !important;
            color: #fff !important;
        }

        /* Add to your existing styles */
        .dashboard-panel {
            background-color: #333;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 1rem;
        }

        .panel-header {
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .column-header {
            color: #fff;
            font-size: 1rem;
            font-weight: normal;
        }

        .label-value-pair {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .label-value-pair label {
            color: #fff;
            margin-bottom: 0;
            white-space: nowrap;
        }

        .form-control {
            background-color: #2c2c2c;
            border: 1px solid #444;
            color: #fff;
            padding: 0.25rem 0.5rem;
            text-align: right;
        }

        /* Specific to Subtriangle panel */
        .subtriangle-panel .form-control {
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title text-center mb-2">Intelligent System Model</h1>

        <!-- First container: Manual Controls, Canvas with Animation Controls -->
        <div class="visualization-container bg-dark p-2 rounded mb-2">
            <!-- Manual Controls (at top) -->
            <div id="manual-controls" class="bg-dark p-2 rounded mb-2">
                <div class="manual-controls-container d-flex justify-content-center align-items-center gap-2">
                    <label class="mb-0">Set Manual:</label>
                    <div class="manual-input-group">
                        <label for="manual-nc1">NC1</label>
                        <input id="manual-nc1" type="text" class="form-control manual-input" maxlength="6" size="8">
                    </div>
                    <div class="manual-input-group">
                        <label for="manual-nc2">NC2</label>
                        <input id="manual-nc2" type="text" class="form-control manual-input" maxlength="6" size="8">
                    </div>
                    <div class="manual-input-group">
                        <label for="manual-nc3">NC3</label>
                        <input id="manual-nc3" type="text" class="form-control manual-input" maxlength="6" size="8">
                    </div>
                    <div class="button-group d-flex align-items-center gap-2">
                        <div class="checkbox-group d-flex align-items-center gap-2">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="applyToStart" checked>
                                <label class="form-check-label" for="applyToStart">Start</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="applyToEnd">
                                <label class="form-check-label" for="applyToEnd">End</label>
                            </div>
                        </div>
                        <button id="apply-manual" class="btn btn-info">Apply</button>
                        <button id="save-preset" class="btn btn-info">Save</button>
                        <div class="dropdown">
                            <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="userPresetsDropdown" data-bs-toggle="dropdown">
                                User Presets
                            </button>
                            <ul class="dropdown-menu" id="userPresetsList">
                                <!-- User presets will be added here dynamically -->
                            </ul>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="animationsDropdown" data-bs-toggle="dropdown">
                                Animations
                            </button>
                            <ul class="dropdown-menu" id="animationsList">
                                <!-- Animations will be added here dynamically -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add after manual controls, before canvas section -->
            <div class="preset-buttons-container d-flex justify-content-center gap-2 mb-2">
                <button id="equilateral" class="btn btn-secondary btn-sm">Equilateral</button>
                <button id="isosceles" class="btn btn-secondary btn-sm">Isosceles</button>
                <button id="scalene" class="btn btn-secondary btn-sm">Scalene</button>
                <button id="right" class="btn btn-secondary btn-sm">Right</button>
                <button id="acute" class="btn btn-secondary btn-sm">Acute</button>
                <button id="obtuse" class="btn btn-secondary btn-sm">Obtuse</button>
            </div>

            <!-- Canvas and Animation Controls -->
            <div class="d-flex align-items-start gap-2">
                <!-- Left Animation Panel (Start) -->
                <div class="animation-panel-start bg-dark p-2 rounded">
                    <label class="mb-2">Animation Start</label>
                    <div class="d-flex flex-column gap-2">
                        <div class="manual-input-group">
                            <label for="animation-nc1-start">NC1</label>
                            <input id="animation-nc1-start" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc2-start">NC2</label>
                            <input id="animation-nc2-start" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc3-start">NC3</label>
                            <input id="animation-nc3-start" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                    </div>
                </div>

                <!-- Canvas (Center) -->
                <div id="canvas-container" class="bg-dark p-2 rounded">
                    <canvas id="canvas"></canvas>
                </div>

                <!-- Right Animation Panel (End) -->
                <div class="animation-panel-end bg-dark p-2 rounded">
                    <label class="mb-2">Animation End</label>
                    <div class="d-flex flex-column gap-2">
                        <div class="manual-input-group">
                            <label for="animation-nc1-end">NC1</label>
                            <input id="animation-nc1-end" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc2-end">NC2</label>
                            <input id="animation-nc2-end" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc3-end">NC3</label>
                            <input id="animation-nc3-end" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <!-- Add new animation buttons -->
                        <div class="d-flex flex-column gap-2 mt-2">
                            <button id="animate-button-end" class="btn btn-info btn-sm">Animate</button>
                            <button id="save-animation-end" class="btn btn-info btn-sm">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            
            

            <!-- Add this section after the canvas and animation controls -->
            <div class="d-flex justify-content-center gap-2 mt-3">
                <!-- Feature Toggle Buttons -->
                <div class="feature-buttons-container d-flex flex-column align-items-center gap-2">
                    <!-- Centers Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleCentroid" class="btn btn-secondary btn-sm">Centroid</button>
                        <button id="toggleIncenter" class="btn btn-secondary btn-sm">Incenter</button>
                        <button id="toggleCircumcenter" class="btn btn-secondary btn-sm">Circumcenter</button>
                        <button id="toggleNinePointCenter" class="btn btn-secondary btn-sm">Nine-Point Center</button>
                        <button id="toggleOrthocenter" class="btn btn-secondary btn-sm">Orthocenter</button>
                        <button id="toggleSubcenter" class="btn btn-secondary btn-sm">Subcenter</button>
                        <button id="toggleEuler" class="btn btn-secondary btn-sm">Euler</button>
                    </div>
                    
                    <!-- Circles Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleIncircle" class="btn btn-secondary btn-sm">Incircle</button>
                        <button id="toggleCircumcircle" class="btn btn-secondary btn-sm">Circumcircle</button>
                        <button id="toggleNinePointCircle" class="btn btn-secondary btn-sm">Nine-Point Circle</button>
                        <button id="toggleOrthocircle" class="btn btn-secondary btn-sm">Orthocircle</button>
                        <button id="toggleSubcircle" class="btn btn-secondary btn-sm">Subcircle</button>
                    </div>

                    <!-- Other Features Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleMidpoints" class="btn btn-secondary btn-sm">Midpoints</button>
                        <button id="toggleTangents" class="btn btn-secondary btn-sm">Tangents</button>
                        <button id="toggleMedians" class="btn btn-secondary btn-sm">Medians</button>
                        <button id="toggleSubsystems" class="btn btn-secondary btn-sm">Subsystems</button>
                        <button id="toggleSubtriangle" class="btn btn-secondary btn-sm">Subtriangle</button>  <!-- New button -->
                    </div>
                </div>
            </div>
        </div>

        
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Container -->
        <div class="dashboard-container">
            <!-- First Row -->
            <div class="dashboard-row">
                
                <!-- Channels Panel -->
                <div class="dashboard-panel">
                    <h3 class="panel-header">System</h3>
                    <div class="d-flex justify-content-center gap-2">
                        <!-- Nodes Panel -->
                        <div class="dashboard-panel" style="min-width: 300px;">
                            <h3 class="panel-header">Nodes</h3>
                            <div class="d-flex gap-3">
                                <!-- Angles Column -->
                                <div class="panel-content">
                                    <div class="label-value-pair">
                                        <label for="node-n1-angle">N1 </label>
                                        <input id="node-n1-angle" type="text" class="form-control" size="8" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node-n2-angle">N2 </label>
                                        <input id="node-n2-angle" type="text" class="form-control" size="8" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node-n3-angle">N3 </label>
                                        <input id="node-n3-angle" type="text" class="form-control" size="8" readonly>
                                    </div>
                                </div>
                                
                                <!-- Coordinates Column -->
                                <div class="panel-content">
                                    <div class="label-value-pair">
                                        <label for="node1-coords">N1 (x,y)</label>
                                        <input id="node1-coords" type="text" class="form-control" size="15" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node2-coords">N2 (x,y)</label>
                                        <input id="node2-coords" type="text" class="form-control" size="15" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node3-coords">N3 (x,y)</label>
                                        <input id="node3-coords" type="text" class="form-control" size="15" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Channels Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Node Channels</h3>
                            <div class="panel-content">
                                <div class="label-value-pair">
                                    <label for="channel-1">NC1</label>
                                    <input id="channel-1" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="channel-2">NC2</label>
                                    <input id="channel-2" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="channel-3">NC3</label>
                                    <input id="channel-3" type="text" class="form-control" size="8" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- MC Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">I-Channels</h3>
                            <div class="panel-content">
                                <div class="label-value-pair">
                                    <label for="subsystem-1-mc">IC1</label>
                                    <input id="subsystem-1-mc" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="subsystem-2-mc">IC2</label>
                                    <input id="subsystem-2-mc" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="subsystem-3-mc">IC3</label>
                                    <input id="subsystem-3-mc" type="text" class="form-control" size="8" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Existing System Entropy and Capacity panel row -->
            <div class="dashboard-row mt-0">  <!-- Remove mt-2 -->
                <div class="dashboard-panel mt-0 border-top-0 rounded-top-0">
                    <h3 class="panel-header">System Entropy and Capacity</h3>
                    <!-- First row: Main values -->
                    <div class="d-flex justify-content-center gap-4 mb-3">
                        <div class="label-value-pair">
                            <label for="system-h">H</label>
                            <input id="system-h" type="text" class="form-control" size="8" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="system-sph">HP</label>
                            <input id="system-sph" type="text" class="form-control" size="8" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="system-mch">HMC</label>
                            <input id="system-mch" type="text" class="form-control" size="8" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="system-b-copy">C</label>
                            <input id="system-b-copy" type="text" class="form-control" size="12" readonly>
                        </div>
                    </div>
                    
                    <!-- Second row: Ratios -->
                    <div class="d-flex justify-content-center gap-4">
                        <!-- SH ratios -->
                        <div class="label-value-pair">
                            <label for="sh-b-ratio">H/C</label>
                            <input id="sh-b-ratio" type="text" class="form-control" size="12" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="b-sh-ratio">C/H</label>
                            <input id="b-sh-ratio" type="text" class="form-control" size="12" readonly>
                        </div>
                        
                        <!-- SPH ratios -->
                        <div class="label-value-pair">
                            <label for="sph-area-ratio">HP/C</label>
                            <input id="sph-area-ratio" type="text" class="form-control" size="10" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="b-sph-ratio">C/HP</label>
                            <input id="b-sph-ratio" type="text" class="form-control" size="12" readonly>
                        </div>
                        
                        <!-- MCH ratios -->
                        <div class="label-value-pair">
                            <label for="mch-b-ratio">HMC/C</label>
                            <input id="mch-b-ratio" type="text" class="form-control" size="12" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="b-mch-ratio">C/HMC</label>
                            <input id="b-mch-ratio" type="text" class="form-control" size="12" readonly>
                        </div>
                    </div>
                </div>
            </div>
            
                <!-- Move Subsystems Panel here -->
                <div class="dashboard-panel">
                    <h3 class="panel-header">Subsystems</h3>
                    <table class="subsystems-table">
                        <thead>
                            <tr>
                                <th>SS</th>
                                <th></th>
                                <th>ssh</th>
                                <th>ssc</th>
                                <th>ssh/ssc</th>
                                <th>ssc/ssh</th>
                                <th>ssh/H</th>
                                <th>H/ssh</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SS1</td>
                                <td><input id="subsystem-1-angle" type="text" class="form-control angle-input" size="8" readonly></td>
                                <td><input id="subsystem-1-sc" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-perimeter" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-area" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-inverse-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-entropy-ratio" type="text" class="form-control" size="8" readonly></td>
                            </tr>
                            <tr>
                                <td>SS2</td>
                                <td><input id="subsystem-2-angle" type="text" class="form-control angle-input" size="8" readonly></td>
                                <td><input id="subsystem-2-sc" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-perimeter" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-area" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-inverse-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-entropy-ratio" type="text" class="form-control" size="8" readonly></td>
                            </tr>
                            <tr>
                                <td>SS3</td>
                                <td><input id="subsystem-3-angle" type="text" class="form-control angle-input" size="8" readonly></td>
                                <td><input id="subsystem-3-sc" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-perimeter" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-area" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-inverse-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-entropy-ratio" type="text" class="form-control" size="8" readonly></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- Subtriangle Panel -->
<div class="dashboard-row">
    <div class="dashboard-panel subtriangle-panel">
        <h3 class="panel-header">Subtriangle</h3>
        
        <!-- First Row: Nodes and Subchannels -->
        <div class="d-flex flex-column gap-3">
            <!-- Headers -->
            <div class="d-flex justify-content-between align-items-center">
                <div class="flex-grow-1"><h4 class="column-header">Nodes</h4></div>
                <div style="width: 30%;"><h4 class="column-header text-center">Subchannels</h4></div>
            </div>

            <!-- Values -->
            <div class="d-flex justify-content-between align-items-center">
                <!-- Nodes -->
                <div class="d-flex gap-3 flex-grow-1">
                    <div class="label-value-pair">
                        <label>SS1 (x,y)</label>
                        <input id="subsystem-1-centroid" type="text" class="form-control" size="15" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>SS2 (x,y)</label>
                        <input id="subsystem-2-centroid" type="text" class="form-control" size="15" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>SS3 (x,y)</label>
                        <input id="subsystem-3-centroid" type="text" class="form-control" size="15" readonly>
                    </div>
                </div>

                <!-- Subchannels -->
                <div class="d-flex gap-3 ms-4">
                    <div class="label-value-pair">
                        <label>SC1</label>
                        <input id="subchannel-1" type="text" class="form-control" size="8" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>SC2</label>
                        <input id="subchannel-2" type="text" class="form-control" size="8" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>SC3</label>
                        <input id="subchannel-3" type="text" class="form-control" size="8" readonly>
                    </div>
                </div>
            </div>

            <!-- Second Row: Entropy and Capacity -->
            <div class="mt-3">
                <h4 class="column-header text-center mb-2">Entropy and Capacity</h4>
                <div class="d-flex justify-content-center gap-3">
                    <div class="label-value-pair">
                        <label>HST</label>
                        <input id="subtriangle-hst" type="text" class="form-control" size="8" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>CST</label>
                        <input id="subtriangle-cst" type="text" class="form-control" size="8" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>HST/CST</label>
                        <input id="hst-cst-ratio" type="text" class="form-control" size="8" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>CST/HST</label>
                        <input id="cst-hst-ratio" type="text" class="form-control" size="8" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>       

            <!-- Second Row -->
            <div class="dashboard-row">
                <!-- Position Panel -->
                <div class="dashboard-panel position-panel">
                    <h3 class="panel-header">Centers</h3>
                    <div class="panel-content">
                        <!-- First Row - Intelligence, Incenter, Subcenter and Special Centers -->
                        <div class="position-row">
                            <div class="label-value-pair">
                                <label for="centroid-coords">I (x,y)</label>
                                <input id="centroid-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="incenter-coords">IC (x,y)</label>
                                <input id="incenter-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <!-- Add new Subcenter input -->
                            <div class="label-value-pair">
                                <label for="subcenter-coords">SC (x,y)</label>
                                <input id="subcenter-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="circumcenter-coords">O (x,y)</label>
                                <input id="circumcenter-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="orthocenter-coords">H (x,y)</label>
                                <input id="orthocenter-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="nine-point-coords">N (x,y)</label>
                                <input id="nine-point-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                        </div>

                        <!-- Second Row - Midpoints and Tangents -->
                        <div class="position-row">
                            <div class="label-value-pair">
                                <label for="mid1-coords">M1 (x,y)</label>
                                <input id="mid1-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="mid2-coords">M2 (x,y)</label>
                                <input id="mid2-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="mid3-coords">M3 (x,y)</label>
                                <input id="mid3-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="tan1-coords">T1 (x,y)</label>
                                <input id="tan1-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="tan2-coords">T2 (x,y)</label>
                                <input id="tan2-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="tan3-coords">T3 (x,y)</label>
                                <input id="tan3-coords" type="text" class="form-control" size="8" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Separator -->
        <div class="separator"></div>

        <!-- Information Panel -->
        <div class="dashboard-panel information-panel">
            <h3 class="panel-header">Information</h3>
            <div class="row g-2">
                <!-- Distance (d) Column -->
                <div class="col-6">
                    <div class="info-column">
                        <h4 class="column-header">d(M,T)</h4>
                        <div class="label-value-pair">
                            <label for="d-m-t-n1">N1:</label>
                            <input id="d-m-t-n1" type="text" class="form-control" size="8" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="d-m-t-n2">N2:</label>
                            <input id="d-m-t-n2" type="text" class="form-control" size="8" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="d-m-t-n3">N3:</label>
                            <input id="d-m-t-n3" type="text" class="form-control" size="8" readonly>
                        </div>
                    </div>
                </div>

                <!-- Ratio (r) Column -->
                <div class="col-6">
                    <div class="info-column">
                        <h4 class="column-header">r(M,T)</h4>
                        <div class="label-value-pair">
                            <label for="r-m-t-n1">N1:</label>
                            <input id="r-m-t-n1" type="text" class="form-control" size="8" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="r-m-t-n2">N2:</label>
                            <input id="r-m-t-n2" type="text" class="form-control" size="8" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label for="r-m-t-n3">N3:</label>
                            <input id="r-m-t-n3" type="text" class="form-control" size="8" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Legends Panel -->
        <div class="legends-panel bg-dark p-2 rounded">
            <h3 class="panel-header">Legend</h3>
            <div class="row">
                <div class="col-md-3">
                    <p>: Angle</p>
                </div>
                <div class="col-md-3">
                    <p>B: Bits (Resource)</p>
                </div>
                <div class="col-md-3">
                    <p>C: Capacity (Area)</p>
                </div>
                <div class="col-md-3">
                    <p>H: Entropy, Total System Entropy (HP + HMC), Length (px)</p>
                </div>
                <div class="col-md-3">
                    <p>h: Subsystem Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>HMC: Median Channel Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>HP: System Perimeter Entropy</p>
                </div>
                <div class="col-md-3">
                <p>MC: Median Channel</p>
            </div>
                <div class="col-md-3">
                    <p>SS: Subsystem</p>
                </div>
                <div class="col-md-3">
                    <p>ssb: Subsystem Bits (Resource)</p>
                </div>
                <div class="col-md-3">
                    <p>ssc: Subsystem Capacity (Area)</p>
                </div>
                <div class="col-md-3">
                    <p>ssh: Subsystem Entropy (Perimeter)</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Export Button Container -->
    <div class="export-container bg-dark p-2 rounded mb-2 text-center">
        <button id="saveState" class="btn btn-primary">Save State</button>
        <button id="exportData" class="btn btn-info ms-2">Export Data</button>
        <button id="exportImage" class="btn btn-info ms-2">Export Image</button>
    </div>

    <script src="script.js" defer></script>
</body>
</html>
