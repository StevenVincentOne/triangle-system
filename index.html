<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Intelligent System Model</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        
        /* Legends Panel Adjustments */
        .legends-panel {
            background-color: #2c2c2c;
            padding: 1rem;
            border-radius: 8px;
            color: #ddd;
        }
        .legends-panel p {
            margin: 0.5rem 0;
        }

        

        /* Update the manual controls styles */
        #manual-controls {
            width: fit-content;
            min-width: min-content;
            background-color: #333;
            border: 1px solid #444;
        }

        .manual-controls-container {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .manual-input-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .manual-input-group label {
            color: #bbb;
            white-space: nowrap;
            min-width: 35px;
        }

        .manual-input-group input.manual-input {
            width: 80px;  /* Width for 8 characters */
            text-align: center;
            background-color: #2c2c2c;
            color: #fff;
            border: 1px solid #555;
            padding: 2px 4px;
            font-family: monospace;  /* For better alignment of numbers */
        }

       a #apply-manual {
            margin-left: 0.5rem;
            padding: 2px 12px;
        }

        .animation-input {
            background-color: #2c2c2c;
            color: #fff;
            border: 1px solid #555;
            padding: 5px 10px;
            border-radius: 4px;
            width: 100px;
        }

        .animation-input:focus {
            outline: none;
            border-color: #0dcaf0;
            box-shadow: 0 0 0 0.25rem rgba(13, 202, 240, 0.25);
        }

        #animate-button {
            margin-left: 0.5rem;
            padding: 2px 12px;
        }

        h3.title {
            margin: 0.25rem 0;  /* Reduce from default margins */
            padding: 0;
        }

        .features {
            margin-top: 0.25rem;  /* Reduce space between title and features */
        }

        /* If needed, adjust canvas top margin */
        #canvas-container {
            margin-top: 0.25rem;
        }

        .title {
            font-size: 1.5rem;  /* Make the title smaller */
            margin: 0 !important;
            padding: 0 !important;
            line-height: 1 !important;
        }

        

        .preset-button, .feature-button {
            width: 14ch;  /* Sets width to 14 characters */
            text-align: center;
        }

        /* For preset buttons */
        .btn-secondary {
            width: 14ch !important;
            text-align: center !important;
        }

        /* For feature buttons in the sidebar */
        #sidebar button {
            width: 14ch !important;
            text-align: center !important;
        }

        /* Minimize spacing between Features header and buttons */
        #sidebar h2 {
            margin: 0 !important;
            padding: 0 !important;
            line-height: 1 !important;
        }

        /* Reduce spacing between feature buttons */
        #sidebar button {
            margin: 0.1rem 0 !important;
            padding: 0.25rem !important;
        }

        /* Reduce sidebar padding */
        #sidebar {
            padding: 0.5rem !important;
        }

        /* Reduce spacing between preset buttons */
        .btn-secondary {
            margin: 0.1rem !important;
            padding: 0.25rem !important;
        }

        /* Reduce container padding */
        .container {
            padding: 0.5rem !important;
        }

        /* Tighten the d-flex spacing */
        .d-flex {
            margin: 0 !important;
            padding: 0 !important;
        }

        /* Reduce sidebar margin */
        #sidebar {
            margin-right: 0.5rem !important;  /* Reduce me-3 to smaller gap */
        }

        /* Reduce spacing between button groups */
        .mb-3 {
            margin-bottom: 0.5rem !important;
        }

        /* Reduce spacing for feature buttons */
        .btn {
            margin: 0.1rem !important;
        }

        /* Ensure h5 headers are tight */
        h5 {
            margin: 0 0 0.25rem 0 !important;
            padding: 0 !important;
        }

        /* Reduce spacing in main content area */
        .main-content > div {
            margin-bottom: 0.25rem !important;  /* Reduce space between all direct children */
            padding: 0.5rem !important;         /* Reduce padding */
        }

        /* Specifically target the controls */
        #manual-controls, #animation-controls {
            margin-top: 0.25rem !important;    /* Minimal top margin */
            padding: 0.5rem !important;        /* Reduced padding */
        }

        .visualization-container {
            margin-bottom: 1rem !important;
        }

        .controls-container {
            margin-bottom: 1rem !important;
        }

        .controls-container {
            background-color: #1a1a1a !important;
        }

        /* Adjust internal spacing */
        .controls-container > div {
            margin-bottom: 0.5rem !important;
        }

        .controls-container > div:last-child {
            margin-bottom: 0 !important;
        }

        #animation-controls {
            width: fit-content !important;
            min-width: min-content !important;
        }

        /* If needed, also add these to ensure consistent styling */
        #animation-controls .manual-controls-container {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .controls-group {
            display: flex;
            gap: 1rem;
            width: fit-content;
        }

        /* Remove bottom margins from children since they're side by side */
        .controls-group > div {
            margin-bottom: 0 !important;
        }

        .container {
            padding-left: 0.5rem !important;    /* Minimal left buffer */
            padding-right: 0.5rem !important;   /* Minimal right buffer */
            margin-left: 0 !important;          /* Remove default left margin */
            margin-right: 0 !important;         /* Remove default right margin */
            max-width: none !important;         /* Allow container to use full width */
        }

        /* Style for both control groups */
        #manual-controls, #animation-controls {
            background-color: #1a1e2c !important;  /* Dark blue background */
            border: 1px solid rgba(255, 255, 255, 0.1) !important;  /* Subtle border for bezel */
            border-radius: 6px !important;
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.2) !important;  /* Inner shadow for depth */
        }

        /* Fix background color for the lower container */
        .controls-container {
            background-color: #1a1e2c !important;  /* Match the dark blue */
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
        }

        /* Ensure consistent header styling */
        #manual-controls h3, #animation-controls h3 {
            color: #ffffff;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }

        

        /* Center all major containers */
        .container > div {
            margin-left: auto !important;
            margin-right: auto !important;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Center the visualization container and its contents */
        .visualization-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: fit-content;
        }

        /* Center the buttons container */
        #buttons-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        /* Center the button rows */
        #buttons-container > div {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }

        /* Center the controls group */
        .controls-group {
            margin: 0 auto;
        }

        

        

        

        

        .main-content {
            width: fit-content !important;
            height: fit-content !important;
        }

        #canvas-container {
            width: 800px !important;  /* Or your desired width */
            height: 600px !important; /* Or your desired height */
            overflow: hidden !important;
        }

        #canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .main-content {
            width: 100% !important;
            display: flex !important;
            justify-content: center !important;
        }

        #canvas-container {
            width: 800px !important;
            height: 600px !important;
            overflow: hidden !important;
            margin: 0 auto !important;  /* Centers horizontally if flex is not working */
        }

        #canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* If needed, also center the parent container */
        .visualization-container {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
        }

        .controls-stack {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;  /* Reduced from default */
            width: 100%;
        }

        #manual-controls, #animation-controls {
            width: 100%;
            margin: 0 !important;  /* Remove any default margins */
            padding: 0.5rem !important;  /* Reduced padding */
        }

        .manual-input-group {
            margin: 0 !important;
            padding: 0 !important;
        }

        .manual-input-group label {
            margin-right: 0.25rem !important;
        }

        .manual-input-group input {
            margin: 0 !important;
            padding: 0.25rem 0.5rem !important;
        }

        .btn {
            padding: 0.25rem 0.5rem !important;
        }

        /* Reduce input field padding */
        .manual-input input, .animation-input input {
            padding: 0.15rem 0.25rem !important;
        }

        /* Tighter spacing between elements */
        .manual-controls-container, .animation-controls-container {
            gap: 0.5rem !important;
        }

        /* Reduce space between label and input */
        .manual-input-group, .animation-input-group {
            gap: 0.25rem !important;
        }

        /* Compact labels */
        .manual-input-group label, .animation-input-group label {
            margin: 0 !important;
            padding-right: 0.15rem !important;
        }

        /* Adjust button padding */
        .btn {
            padding: 0.15rem 0.35rem !important;
        }

        /* Adjust dropdown button */
        .dropdown-toggle {
            padding: 0.15rem 0.35rem !important;
        }

        .manual-input, .animation-input {
            width: 8ch !important;     /* Increased to 8ch to ensure visibility of 6 chars plus decimal */
            min-width: 8ch !important; /* Match the width */
            padding: 0.15rem 0.25rem !important;
        }

        .manual-input-group input, .animation-input-group input {
            width: 8ch !important;
            min-width: 8ch !important;
        }

        /* Reduce text size for manual and animation controls */
        .manual-controls-container,
        .animation-controls-container,
        .manual-input-group,
        .animation-input-group,
        .manual-input-group label,
        .animation-input-group label,
        .manual-input,
        .animation-input,
        .manual-controls-container .btn,
        .animation-controls-container .btn {
            font-size: 0.8rem !important;  /* Reduced from 0.9rem to 0.8rem */
        }

        /* Adjust input height to match new font size */
        .manual-input,
        .animation-input {
            height: calc(1.4em + 0.4rem) !important;  /* Further reduced height */
        }

        /* Adjust button padding to match new size */
        .manual-controls-container .btn,
        .animation-controls-container .btn {
            padding: 0.1rem 0.25rem !important;  /* Further reduced padding */
        }

        

        /* Button sizing and consistency fixes */
        .btn-secondary {
            padding: 0.375rem 0.75rem;  /* Standard Bootstrap padding */
            width: auto !important;     /* Override any width settings */
            min-width: fit-content;     /* Adjust to content */
            height: auto !important;    /* Override any height settings */
            white-space: nowrap;        /* Prevent text wrapping */
            display: inline-flex;       /* Use flexbox for better content alignment */
            align-items: center;        /* Center content vertically */
            justify-content: center;    /* Center content horizontally */
        }

        /* Ensure buttons maintain size when active/selected */
        .btn-secondary:active,
        .btn-secondary.active {
            width: auto !important;
            min-width: fit-content;
            height: auto !important;
        }

        /* Feature buttons container specific styles */
        #buttons-container .d-flex {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        #buttons-container .btn {
            margin: 0;                  /* Remove any margin that might affect sizing */
            flex: 0 0 auto;            /* Prevent flex growth/shrink */
        }
        

        

        

       

        /* Add to your existing styles */
        .animation-panel-start,
        .animation-panel-end {
            width: 120px;
            padding: 0.5rem;
            background-color: #2c2c2c;
            border: 1px solid #444;
            border-radius: 4px
        }

        .animation-panel-start label,
        .animation-panel-end label {
            color: #ddd;
            font-size: 0.8rem;
            text-align: center;
            width: 100%;
            border-bottom: 1px solid #444;
            padding-bottom: 0.25rem;
        }

        .animation-panel-start .manual-input-group,
        .animation-panel-end .manual-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .animation-panel-start input,
        .animation-panel-end input {
            width: 100%;
            font-size: 0.8rem;
            padding: 0.15rem 0.25rem;
        }

        #canvas-container {
            flex: 1;
            margin: 0 1rem;
        }

        /* Add to your existing styles */
        .visualization-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        #manual-controls {
            width: 100%;
            padding: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .animation-panel-start,
        .animation-panel-end {
            min-width: 120px;
        }

        /* Add to your existing styles */
        .feature-buttons-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-buttons-container .btn {
            min-width: 90px;
            text-align: center;
        }

        /* Style for active feature buttons */
        .feature-buttons-container .btn.btn-info {
            background-color: #0dcaf0;
            border-color: #0dcaf0;
            color: #000;
        }

        /* Add to your existing styles */
        .preset-buttons-container {
            background-color: #1a1e2c;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .preset-buttons-container .btn {
            min-width: 90px;
            text-align: center;
        }

        /* Ensure consistent button styling */
        .btn-secondary {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* Add to your existing styles */
        #animation-controls {
            min-width: 300px;
        }

        #animation-controls input {
            width: 80px;
        }

        /* Add to your existing styles section */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group .form-check {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .checkbox-group .form-check-input {
            margin-top: 0;
        }

        .checkbox-group .form-check-label {
            margin-bottom: 0;
        }

        /* Export container button spacing */
        .export-container button {
            margin-right: 0.5rem !important;
        }
        
        .export-container button:last-child {
            margin-right: 0 !important;
        }

        /* Save State button styling */
        #saveState {
            background-color: #198754 !important;  /* Bootstrap success green */
            border-color: #198754 !important;
        }

        #saveState:hover {
            background-color: #157347 !important;
            border-color: #146c43 !important;
        }

        

        /* =================
           Subtriangle Panel
           ================= */
        .subtriangle-headers {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .subtriangle-main-row {
            display: flex;
            justify-content: space-between;
            gap: 2rem;
            margin-bottom: 1rem;
        }

        .nodes-section {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .subchannels-section {
            display: flex;
            gap: 1rem;
        }

        .entropy-section {
            text-align: center;
        }

        .entropy-section .section-header {
            margin-bottom: 0.5rem;
        }

        /* Coordinate inputs in subtriangle */
        .subtriangle-main-row .coordinate-input {
            width: 12ch !important;
        }

        /* =================
           Euler Line Panel
           ================= */
        .coordinate-input {
            width: 12ch !important;  /* Wider for coordinate pairs */
        }

        .panel-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 0.5rem;
        }

        .panel-row:last-child {
            margin-bottom: 0;
        }

    </style>
</head>
<body>
    <div class="container">
        <h1 class="title text-center mb-2">Intelligent System Model</h1>

        <!-- First container: Manual Controls, Canvas with Animation Controls -->
        <div class="visualization-container bg-dark p-2 rounded mb-2">
            <!-- Manual Controls (at top) -->
            <div id="manual-controls" class="bg-dark p-2 rounded mb-2">
                <!-- NC Controls (existing) -->
                <div class="manual-controls-container d-flex justify-content-center align-items-center gap-2 mb-2">
                    <label class="mb-0">Set Manual NC:</label>
                    <div class="manual-input-group">
                        <label for="manual-nc1">NC1</label>
                        <input id="manual-nc1" type="text" class="form-control manual-input" maxlength="6" size="8">
                    </div>
                    <div class="manual-input-group">
                        <label for="manual-nc2">NC2</label>
                        <input id="manual-nc2" type="text" class="form-control manual-input" maxlength="6" size="8">
                    </div>
                    <div class="manual-input-group">
                        <label for="manual-nc3">NC3</label>
                        <input id="manual-nc3" type="text" class="form-control manual-input" maxlength="6" size="8">
                    </div>
                    <div class="button-group d-flex align-items-center gap-2">
                        <div class="checkbox-group d-flex align-items-center gap-2">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="applyToStart" checked>
                                <label class="form-check-label" for="applyToStart">Start</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="applyToEnd">
                                <label class="form-check-label" for="applyToEnd">End</label>
                            </div>
                        </div>
                        <button id="apply-manual" class="btn btn-info">Apply NC</button>
                    </div>
                
                    <label class="mb-0"> IC:</label>
                    <div class="manual-input-group">
                        <label for="manual-ic1">IC1</label>
                        <input id="manual-ic1" type="text" class="form-control manual-input" maxlength="6" size="8">
                    </div>
                    <div class="manual-input-group">
                        <label for="manual-ic2">IC2</label>
                        <input id="manual-ic2" type="text" class="form-control manual-input" maxlength="6" size="8">
                    </div>
                    <div class="manual-input-group">
                        <label for="manual-ic3">IC3</label>
                        <input id="manual-ic3" type="text" class="form-control manual-input" maxlength="6" size="8">
                    </div>
                    <button id="apply-manual-ic" class="btn btn-info">Apply IC</button>
                </div>
            </div>

            <!-- Preset buttons and dropdowns container -->
            <div class="preset-buttons-container d-flex justify-content-center gap-2 mb-2">
                <!-- Standard preset buttons -->
                <button id="equilateral" class="btn btn-secondary btn-sm">Equilateral</button>
                <button id="isosceles" class="btn btn-secondary btn-sm">Isosceles</button>
                <button id="scalene" class="btn btn-secondary btn-sm">Scalene</button>
                <button id="right" class="btn btn-secondary btn-sm">Right</button>
                <button id="acute" class="btn btn-secondary btn-sm">Acute</button>
                <button id="obtuse" class="btn btn-secondary btn-sm">Obtuse</button>
                
                <!-- Add Save button -->
                <button id="save-preset" class="btn btn-success btn-sm">Save Preset</button>
                
                <!-- Moved dropdowns -->
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="userPresetsDropdown" data-bs-toggle="dropdown">
                        User Presets
                    </button>
                    <ul class="dropdown-menu" id="userPresetsList">
                        <!-- User presets will be added here dynamically -->
                    </ul>
                </div>
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="animationsDropdown" data-bs-toggle="dropdown">
                        Animations
                    </button>
                    <ul class="dropdown-menu" id="animationsList">
                        <!-- Animations will be added here dynamically -->
                    </ul>
                </div>
            </div>

            <!-- Canvas and Animation Controls -->
            <div class="d-flex align-items-start gap-2">
                <!-- Left Animation Panel (Start) -->
                <div class="animation-panel-start bg-dark p-2 rounded">
                    <label class="mb-2">Animation Start</label>
                    <div class="d-flex flex-column gap-2">
                        <div class="manual-input-group">
                            <label for="animation-nc1-start">NC1</label>
                            <input id="animation-nc1-start" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc2-start">NC2</label>
                            <input id="animation-nc2-start" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc3-start">NC3</label>
                            <input id="animation-nc3-start" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                    </div>
                </div>

                <!-- Canvas (Center) -->
                <div id="canvas-container" class="bg-dark p-2 rounded">
                    <canvas id="canvas"></canvas>
                </div>

                <!-- Right Animation Panel (End) -->
                <div class="animation-panel-end bg-dark p-2 rounded">
                    <label class="mb-2">Animation End</label>
                    <div class="d-flex flex-column gap-2">
                        <div class="manual-input-group">
                            <label for="animation-nc1-end">NC1</label>
                            <input id="animation-nc1-end" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc2-end">NC2</label>
                            <input id="animation-nc2-end" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="animation-nc3-end">NC3</label>
                            <input id="animation-nc3-end" type="text" class="form-control manual-input" maxlength="6">
                        </div>
                        <!-- Add new animation buttons -->
                        <div class="d-flex flex-column gap-2 mt-2">
                            <button id="animate-button-end" class="btn btn-info btn-sm">Animate</button>
                            <button id="save-animation-end" class="btn btn-info btn-sm">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            
            

            <!-- Add this section after the canvas and animation controls -->
            <div class="d-flex justify-content-center gap-2 mt-3">
                <!-- Feature Toggle Buttons -->
                <div class="feature-buttons-container d-flex flex-column align-items-center gap-2">
                    <!-- Centers Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleCentroid" class="btn btn-secondary btn-sm">Centroid</button>
                        <button id="toggleIncenter" class="btn btn-secondary btn-sm">Incenter</button>
                        <button id="toggleCircumcenter" class="btn btn-secondary btn-sm">Circumcenter</button>
                        <button id="toggleNinePointCenter" class="btn btn-secondary btn-sm">Nine-Point Center</button>
                        <button id="toggleOrthocenter" class="btn btn-secondary btn-sm">Orthocenter</button>
                        <button id="toggleSubcenter" class="btn btn-secondary btn-sm">Subcenter</button>
                        <button id="toggleEuler" class="btn btn-secondary btn-sm">Euler</button>
                    </div>
                    
                    <!-- Circles Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleIncircle" class="btn btn-secondary btn-sm">Incircle</button>
                        <button id="toggleCircumcircle" class="btn btn-secondary btn-sm">Circumcircle</button>
                        <button id="toggleNinePointCircle" class="btn btn-secondary btn-sm">Nine-Point Circle</button>
                        <button id="toggleOrthocircle" class="btn btn-secondary btn-sm">Orthocircle</button>
                        <button id="toggleSubcircle" class="btn btn-secondary btn-sm">Subcircle</button>
                    </div>

                    <!-- Other Features Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleMidpoints" class="btn btn-secondary btn-sm">Midpoints</button>
                        <button id="toggleTangents" class="btn btn-secondary btn-sm">Tangents</button>
                        <button id="toggleMedians" class="btn btn-secondary btn-sm">Medians</button>
                        <button id="toggleSubsystems" class="btn btn-secondary btn-sm">Subsystems</button>
                        <button id="toggleSubtriangle" class="btn btn-secondary btn-sm">Subtriangle</button>  <!-- New button -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Container -->
        <div class="dashboard-container">
                <!-- System Panel -->
                <div class="dashboard-panel">
                    <h3 class="panel-header">System</h3>
                    <div class="panel-row">  <!-- Changed to panel-row for horizontal alignment -->
                        <!-- Nodes Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Nodes</h3>
                            <div class="panel-row">
                                <!-- Angles Column -->
                                <div class="value-column">
                                    <div class="label-value-pair">
                                        <label for="node-n1-angle">N1 ∠</label>
                                        <input id="node-n1-angle" type="text" class="form-control" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node-n2-angle">N2 ∠</label>
                                        <input id="node-n2-angle" type="text" class="form-control" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node-n3-angle">N3 ∠</label>
                                        <input id="node-n3-angle" type="text" class="form-control" readonly>
                                    </div>
                                </div>
                                
                                <!-- Coordinates Column -->
                                <div class="value-column">
                                    <div class="label-value-pair">
                                        <label for="node1-coords">N1 (x,y)</label>
                                        <input id="node1-coords" type="text" class="form-control coordinate-input" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node2-coords">N2 (x,y)</label>
                                        <input id="node2-coords" type="text" class="form-control coordinate-input" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node3-coords">N3 (x,y)</label>
                                        <input id="node3-coords" type="text" class="form-control coordinate-input" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Node Channels Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Node Channels</h3>
                            <div class="panel-content">
                                <div class="label-value-pair">
                                    <label for="channel-1">NC1</label>
                                    <input id="channel-1" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="channel-2">NC2</label>
                                    <input id="channel-2" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="channel-3">NC3</label>
                                    <input id="channel-3" type="text" class="form-control" size="8" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- Midpoints Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Midpoints</h3>
                            <div class="panel-content">
                                <div class="label-value-pair">
                                    <label for="mid1-coords">M1 (x,y)</label>
                                    <input id="mid1-coords" type="text" class="form-control coordinate-input" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="mid2-coords">M2 (x,y)</label>
                                    <input id="mid2-coords" type="text" class="form-control coordinate-input" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="mid3-coords">M3 (x,y)</label>
                                    <input id="mid3-coords" type="text" class="form-control coordinate-input" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- I-Channels Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">I-Channels</h3>
                            <div class="panel-content">
                                <div class="label-value-pair">
                                    <label for="subsystem-1-mc">IC1</label>
                                    <input id="subsystem-1-mc" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="subsystem-2-mc">IC2</label>
                                    <input id="subsystem-2-mc" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="subsystem-3-mc">IC3</label>
                                    <input id="subsystem-3-mc" type="text" class="form-control" size="8" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Entropy and Capacity Panel -->
<div class="dashboard-panel">
    <h3 class="panel-header">System Entropy and Capacity</h3>
    
    <div class="panel-content">
        <!-- Main Values Section -->
        <div class="value-section">
            <div class="panel-row">
                <div class="label-value-pair">
                    <label for="system-h">H</label>
                    <input id="system-h" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="system-sph">HP</label>
                    <input id="system-sph" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="system-mch">HIC</label>
                    <input id="system-mch" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="system-b-copy">C</label>
                    <input id="system-b-copy" type="text" readonly>
                </div>
            </div>
        </div>
        
        <!-- Primary Ratios Section -->
        <div class="value-section">
            <div class="panel-row">
                <div class="label-value-pair">
                    <label for="sh-b-ratio">H/C</label>
                    <input id="sh-b-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="b-sh-ratio">C/H</label>
                    <input id="b-sh-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="sph-area-ratio">HP/C</label>
                    <input id="sph-area-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="b-sph-ratio">C/HP</label>
                    <input id="b-sph-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="mch-b-ratio">HIC/C</label>
                    <input id="mch-b-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="b-mch-ratio">C/HIC</label>
                    <input id="b-mch-ratio" type="text" readonly>
                </div>
            </div>
        </div>

        <!-- Secondary Ratios Section -->
        <div class="value-section">
            <div class="panel-row">
                <div class="label-value-pair">
                    <label for="hp-hic-ratio">HP/HIC</label>
                    <input id="hp-hic-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="hic-hp-ratio">HIC/HP</label>
                    <input id="hic-hp-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="hp-h-ratio">HP/H</label>
                    <input id="hp-h-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="h-hp-ratio">H/HP</label>
                    <input id="h-hp-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="hic-h-ratio">HIC/H</label>
                    <input id="hic-h-ratio" type="text" readonly>
                </div>
                <div class="label-value-pair">
                    <label for="h-hic-ratio">H/HIC</label>
                    <input id="h-hic-ratio" type="text" readonly>
                </div>
            </div>
        </div>
    </div>
</div>
            
                <!-- Subsystems Panel -->
                <div class="dashboard-panel">
                    <h3 class="panel-header">Subsystems</h3>
                    <table class="subsystems-table">
                        <thead>
                            <tr>
                                <th>ss</th>
                                <th>∠</th>
                                <th>ssh</th>
                                <th>ssc</th>
                                <th>ssh/ssc</th>
                                <th>ssc/ssh</th>
                                <th>ssh/H</th>
                                <th>H/ssh</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ss1</td>
                                <td><input id="subsystem-1-angle" type="text" class="form-control angle-input" size="8" readonly></td>
                                <td><input id="subsystem-1-sc" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-perimeter" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-area" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-inverse-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-1-entropy-ratio" type="text" class="form-control" size="8" readonly></td>
                            </tr>
                            <tr>
                                <td>ss2</td>
                                <td><input id="subsystem-2-angle" type="text" class="form-control angle-input" size="8" readonly></td>
                                <td><input id="subsystem-2-sc" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-perimeter" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-area" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-inverse-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-2-entropy-ratio" type="text" class="form-control" size="8" readonly></td>
                            </tr>
                            <tr>
                                <td>ss3</td>
                                <td><input id="subsystem-3-angle" type="text" class="form-control angle-input" size="8" readonly></td>
                                <td><input id="subsystem-3-sc" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-perimeter" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-area" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-inverse-ratio" type="text" class="form-control" size="8" readonly></td>
                                <td><input id="subsystem-3-entropy-ratio" type="text" class="form-control" size="8" readonly></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
        
            
            <!-- Subtriangle Panel -->
            <div class="dashboard-panel">
                <h3 class="panel-header">Subtriangle</h3>
                
                <div class="panel-content">
                    <!-- Headers Row -->
                    <div class="subtriangle-headers">
                        <h4 class="section-header">Nodes</h4>
                        <h4 class="section-header">Subchannels</h4>
                    </div>

                    <!-- Main Row -->
                    <div class="subtriangle-main-row">
                        <!-- Nodes Section -->
                        <div class="nodes-section">
                            <div class="label-value-pair">
                                <label>ssi1 (x,y)</label>
                                <input id="subsystem-1-centroid" type="text" class="coordinate-input" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>ssi2 (x,y)</label>
                                <input id="subsystem-2-centroid" type="text" class="coordinate-input" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>ssi3 (x,y)</label>
                                <input id="subsystem-3-centroid" type="text" class="coordinate-input" readonly>
                            </div>
                        </div>

                        <!-- Subchannels Section -->
                        <div class="subchannels-section">
                            <div class="label-value-pair">
                                <label>sc1</label>
                                <input id="subchannel-1" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>sc2</label>
                                <input id="subchannel-2" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>sc3</label>
                                <input id="subchannel-3" type="text" readonly>
                            </div>
                        </div>
                    </div>

                    <!-- Entropy Section -->
                    <div class="entropy-section">
                        <h4 class="section-header">Entropy and Capacity</h4>
                        <div class="panel-row">
                            <div class="label-value-pair">
                                <label>hst</label>
                                <input id="subtriangle-hst" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>cst</label>
                                <input id="subtriangle-cst" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>hst/cst</label>
                                <input id="hst-cst-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>cst/hst</label>
                                <input id="cst-hst-ratio" type="text" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Euler Line panel -->
            <div class="dashboard-panel">
                <h3 class="panel-header">Euler Line</h3>
                
                <!-- Points and Length Row -->
                <div class="panel-content">
                    <div class="panel-row">
                        <div class="label-value-pair">
                            <label>O (x,y)</label>
                            <input id="circumcenter-coords" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>I (x,y)</label>
                            <input id="centroid-coords" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>SP (x,y)</label>
                            <input id="subcenter-coords" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>NP (x,y)</label>
                            <input id="nine-point-coords" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>HO (x,y)</label>
                            <input id="orthocenter-coords" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>EL</label>
                            <input id="euler-line-length" type="text" readonly>
                        </div>
                    </div>

                    <!-- Slope, Angle and Ratios Row -->
                    <div class="panel-row">
                        <div class="label-value-pair">
                            <label>mEL</label>
                            <input id="euler-line-slope" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>θEL</label>
                            <input id="euler-line-angle" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>O-I/EL</label>
                            <input id="o-i-ratio" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>I-SP/EL</label>
                            <input id="i-sp-ratio" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>SP-NP/EL</label>
                            <input id="sp-np-ratio" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>NP-HO/EL</label>
                            <input id="np-ho-ratio" type="text" readonly>
                        </div>
                    </div>

                    <!-- NC Intersection Angles Row -->
                    <div class="panel-row">
                        <div class="label-value-pair">
                            <label>NC1 θa</label>
                            <input id="nc1-acute" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>NC1 θo</label>
                            <input id="nc1-obtuse" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>NC2 θa</label>
                            <input id="nc2-acute" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>NC2 θo</label>
                            <input id="nc2-obtuse" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>NC3 θa</label>
                            <input id="nc3-acute" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>NC3 θo</label>
                            <input id="nc3-obtuse" type="text" readonly>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Incircle Panel -->
            <div class="dashboard-panel">
                <h3 class="panel-header">Incircle</h3>
                <div class="panel-content">
                    <!-- Coordinates and Measurements Row -->
                    <div class="panel-row">
                        <div class="label-value-pair">
                            <label>IN (x,y)</label>
                            <input id="incenter-coords" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>T1 (x,y)</label>
                            <input id="tan1-coords" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>T2 (x,y)</label>
                            <input id="tan2-coords" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>T3 (x,y)</label>
                            <input id="tan3-coords" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>rIN</label>
                            <input id="inradius" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>CIN</label>
                            <input id="incircle-capacity" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>HIN</label>
                            <input id="incircle-entropy" type="text" readonly>
                        </div>
                    </div>

                    <!-- Distances and Ratios Row -->
                    <div class="panel-row">
                        <div class="label-value-pair">
                            <label>d(M,T)1</label>
                            <input id="d-m-t-n1" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>d(M,T)2</label>
                            <input id="d-m-t-n2" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>d(M,T)3</label>
                            <input id="d-m-t-n3" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>r(M,T)1</label>
                            <input id="r-m-t-n1" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>r(M,T)2</label>
                            <input id="r-m-t-n2" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>r(M,T)3</label>
                            <input id="r-m-t-n3" type="text" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
<!-- Separator -->
<div class="separator"></div>

        <!-- Legends Panel -->
        <div class="legends-panel bg-dark p-2 rounded">
            <h3 class="panel-header">Legend</h3>
            <div class="row">
                <div class="col-md-3">
                    <p>∠: Angle</p>
                </div>
                <div class="col-md-3">
                    <p>B: Bits (Resource)</p>
                </div>
                <div class="col-md-3">
                    <p>C: Capacity (Area), measured in B (Bits)</p>
                </div>
                <div class="col-md-3">
                    <p>cst: Capacity of the Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>H: Entropy, Total System Entropy (HP + HIC), measured as Length in pixels</p>
                </div>
                <div class="col-md-3">
                    <p>h: Subsystem Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>HO: Orthocenter of the Orthocircle</p>
                </div>
                <div class="col-md-3">
                    <p>HIC: Intelligence Channel Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>HP: System Perimeter Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>hst: Entropy of the Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>I: centroid, Intelligence of the system</p>
                </div>
                <div class="col-md-3">
                    <p>IC: I-Channel or Intelligence Channel (distance from the centroid I to theNode N)</p>
                </div>
                <div class="col-md-3">
                    <p>IN: Incenter Point of the Incircle</p>
                </div>
                <div class="col-md-3">
                    <p>M: Midpoint (between two Nodes)</p>
                </div>
                <div class="col-md-3">
                    <p>N: Node (vertex)</p>
                </div>
                <div class="col-md-3">
                    <p>NC: Node Channel (distance between two Nodes)</p>
                </div>
                <div class="col-md-3">
                    <p>NP: Nine-Point Center</p>
                </div>
                <div class="col-md-3">
                    <p>O: Circumcenter of the Circumcircle</p>
                </div>
                <div class="col-md-3">
                    <p>sc: Subchannel of the Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>SP: Subcenter Point of the Subcircle</p>
                </div>
                <div class="col-md-3">
                    <p>ss: Subsystem</p>
                </div>
                <div class="col-md-3">
                    <p>ssb: Subsystem Bits (Resource)</p>
                </div>
                <div class="col-md-3">
                    <p>ssc: Subsystem Capacity (Area)</p>
                </div>
                <div class="col-md-3">
                    <p>ssh: Subsystem Entropy (Perimeter)</p>
                </div>
                <div class="col-md-3">
                    <p>ssi: Subsystem Centroid, Subtriangle Node</p>
                </div>
                <div class="col-md-3">
                    <p>st: Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>T: Tangent point of Incircle</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Export Button Container -->
    <div class="export-container bg-dark p-2 rounded mb-2 text-center">
        <button id="saveState" class="btn btn-primary">Save State</button>
        <button id="exportData" class="btn btn-info ms-2">Export Data</button>
        <button id="exportImage" class="btn btn-info ms-2">Export Image</button>
    </div>

    <script src="script.js" defer></script>
</body>
</html>
